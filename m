Return-Path: <devicetree-owner@vger.kernel.org>
X-Original-To: lists+devicetree@lfdr.de
Delivered-To: lists+devicetree@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.lfdr.de (Postfix) with ESMTP id C23D621C707
	for <lists+devicetree@lfdr.de>; Sun, 12 Jul 2020 05:02:12 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1728057AbgGLDCL (ORCPT <rfc822;lists+devicetree@lfdr.de>);
        Sat, 11 Jul 2020 23:02:11 -0400
Received: from mail2.protonmail.ch ([185.70.40.22]:55083 "EHLO
        mail2.protonmail.ch" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S1727092AbgGLDCL (ORCPT
        <rfc822;devicetree@vger.kernel.org>); Sat, 11 Jul 2020 23:02:11 -0400
Date:   Sun, 12 Jul 2020 03:01:54 +0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=slash.cl;
        s=protonmail; t=1594522920;
        bh=0/BraJXPVPelEo1iwEKNWSjybP3t8puaBkVSWfy1ttM=;
        h=Date:To:From:Cc:Reply-To:Subject:From;
        b=eIQEnqFcDDgabHR/rnQozDi2d/+esYtHhjjMaGQDPIO/CEvJyFWGJb+df45DjqMIW
         h2ioH4LQZfbE/Ru69hUc1cnBWQPmjDkllGbobcnTnJO2x6fQ7kBQkvi34ubv0c4FWi
         bm+CHdlHFt0/nyAcY5FNE434FMOoL2yoprW2N2WE=
To:     "heiko@sntech.de" <heiko@sntech.de>,
        "linux-rockchip@lists.infradead.org" 
        <linux-rockchip@lists.infradead.org>
From:   Pablo Cholaky <waltercool@slash.cl>
Cc:     "devicetree@vger.kernel.org" <devicetree@vger.kernel.org>,
        "linux-arm-kernel@lists.infradead.org" 
        <linux-arm-kernel@lists.infradead.org>
Reply-To: Pablo Cholaky <waltercool@slash.cl>
Subject: [PATCH] Enable USB3 Rockchip PHY for RK3328-roc-cc
Message-ID: <mnojkNhcsTvupICQKkqp4oDFzfa8Npta5VnXlTP1hQqbEIVRaGcbfLeiFfbrK4WEKV3YFJgTe78nG9hC2ly8QTp0s1E_9etpxj340ZwL1LI=@slash.cl>
MIME-Version: 1.0
Content-Type: multipart/mixed;
 boundary="b1_I3yRooAJyDua9xsKfbCi5xA10ba7ARh7u54qNRSMQ"
X-Spam-Status: No, score=-1.2 required=7.0 tests=ALL_TRUSTED,DKIM_SIGNED,
        DKIM_VALID,DKIM_VALID_AU,DKIM_VALID_EF shortcircuit=no
        autolearn=disabled version=3.4.4
X-Spam-Checker-Version: SpamAssassin 3.4.4 (2020-01-24) on mail.protonmail.ch
Sender: devicetree-owner@vger.kernel.org
Precedence: bulk
List-ID: <devicetree.vger.kernel.org>
X-Mailing-List: devicetree@vger.kernel.org

This is a multi-part message in MIME format.

--b1_I3yRooAJyDua9xsKfbCi5xA10ba7ARh7u54qNRSMQ
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable

Hi everyone,

Please review/accept this patch for linux-rockchip for-next branch.

Using RK3328-roc-cc vanilla kernel only makes 1/3 USB 2.0 working devices. =
This patch enables USB3 support and enable all USB devices.

It been tested at Linux 5.6.0 and 5.7.8 with no problem, also changes shoul=
dn't impact other settings due device tree nature. The only extra inclusion=
 is PHY INNO USB3 which been took from https://github.com/free-z4u/roc-rk33=
28-cc

Some extra minor changes been took from Peter Geis repository (https://gith=
ub.com/pgwipeout/linux-rockchip) and also include some minor changes like:
- Enable sound dais
- Enable GPU
- Enable PWM fan
- Fix sdmmc detection on boot

Many thanks.

--
Pablo Cholaky
--b1_I3yRooAJyDua9xsKfbCi5xA10ba7ARh7u54qNRSMQ
Content-Type: text/x-patch; name=rk3328-roc-cc-usb3.patch
Content-Transfer-Encoding: base64
Content-Disposition: attachment; filename=rk3328-roc-cc-usb3.patch

Y29tbWl0IGQyM2NlOWI1M2U3N2ZmYzRjM2EzNjc1YWYzYjA2ZmM2OWM5ODk3MTAKQXV0aG9yOiBQ
YWJsbyBDaG9sYWt5IDx3YWx0ZXJjb29sQHNsYXNoLmNsPgpEYXRlOiAgIFNhdCBKdWwgMTEgMjI6
MDE6MDggMjAyMCAtMDQwMAoKICAgIFVTQjMgc3VwcG9ydCBmb3IgUm9ja2NoaXAgUEhZLiBVc2Vk
IGZvciBSSzMzMjgtcm9jLWNjCiAgICAKICAgIEFkZHMgQ09ORklHX1BIWV9ST0NLQ0hJUF9JTk5P
X1VTQjMgYW5kIG1ha2UgaXQgd29yayBmb3IKICAgIHJrMzMyOC1yb2MtY2MgZGV2aWNlIHRyZWUg
c2V0dGluZy4KICAgIAogICAgQWRkIGZpeGVzIGZvciBHUFUvU291bmQvU0RNTUMgZm9yIHNhbWUg
ZGV2aWNlCiAgICAKICAgIFNpZ25lZC1vZmYtYnk6IFBhYmxvIENob2xha3kgPHdhbHRlcmNvb2xA
c2xhc2guY2w+CgpkaWZmIC0tZ2l0IGEvYXJjaC9hcm02NC9ib290L2R0cy9yb2NrY2hpcC9yazMz
Mjgtcm9jLWNjLmR0cyBiL2FyY2gvYXJtNjQvYm9vdC9kdHMvcm9ja2NoaXAvcmszMzI4LXJvYy1j
Yy5kdHMKaW5kZXggYjcwZmZiMWM2YTYzLi4xZTViZTJjMDM2YjEgMTAwNjQ0Ci0tLSBhL2FyY2gv
YXJtNjQvYm9vdC9kdHMvcm9ja2NoaXAvcmszMzI4LXJvYy1jYy5kdHMKKysrIGIvYXJjaC9hcm02
NC9ib290L2R0cy9yb2NrY2hpcC9yazMzMjgtcm9jLWNjLmR0cwpAQCAtMTQsNiArMTQsMzIgQEAg
Y2hvc2VuIHsKIAkJc3Rkb3V0LXBhdGggPSAic2VyaWFsMjoxNTAwMDAwbjgiOwogCX07CiAKKwlz
b3VuZCB7CisJCWNvbXBhdGlibGUgPSAic2ltcGxlLWF1ZGlvLWNhcmQiOworCQlzaW1wbGUtYXVk
aW8tY2FyZCxmb3JtYXQgPSAiaTJzIjsKKwkJc2ltcGxlLWF1ZGlvLWNhcmQsbWNsay1mcyA9IDwy
NTY+OworCQlzaW1wbGUtYXVkaW8tY2FyZCxuYW1lID0gInJvY2tjaGlwLHJrMzMyOCI7CisJCXNp
bXBsZS1hdWRpby1jYXJkLGNwdSB7CisJCQlzb3VuZC1kYWkgPSA8JmkyczE+OworCQl9OworCQlz
aW1wbGUtYXVkaW8tY2FyZCxjb2RlYyB7CisJCQlzb3VuZC1kYWkgPSA8JmNvZGVjPjsKKwkJfTsK
Kwl9OworCisJaGRtaS1zb3VuZCB7CisJCWNvbXBhdGlibGUgPSAic2ltcGxlLWF1ZGlvLWNhcmQi
OworCQlzaW1wbGUtYXVkaW8tY2FyZCxmb3JtYXQgPSAiaTJzIjsKKwkJc2ltcGxlLWF1ZGlvLWNh
cmQsbWNsay1mcyA9IDwxMjg+OworCQlzaW1wbGUtYXVkaW8tY2FyZCxuYW1lID0gInJvY2tjaGlw
LGhkbWkiOworCQlzaW1wbGUtYXVkaW8tY2FyZCxjcHUgeworCQkJc291bmQtZGFpID0gPCZpMnMw
PjsKKwkJfTsKKwkJc2ltcGxlLWF1ZGlvLWNhcmQsY29kZWMgeworCQkJc291bmQtZGFpID0gPCZo
ZG1pPjsKKwkJfTsKKwl9OworCiAJZ21hY19jbGtpbjogZXh0ZXJuYWwtZ21hYy1jbG9jayB7CiAJ
CWNvbXBhdGlibGUgPSAiZml4ZWQtY2xvY2siOwogCQljbG9jay1mcmVxdWVuY3kgPSA8MTI1MDAw
MDAwPjsKQEAgLTgzLDYgKzEwOSw2MiBAQCB2Y2NfcGh5OiB2Y2MtcGh5LXJlZ3VsYXRvciB7CiAJ
CXJlZ3VsYXRvci1ib290LW9uOwogCX07CiAKKwlmYW4wOiBwd20tZmFuIHsKKwkJY29tcGF0aWJs
ZSA9ICJwd20tZmFuIjsKKwkJcHdtcyA9IDwmcHdtMiAwIDEwMDAwIDA+OworCQljb29saW5nLW1p
bi1zdGF0ZSA9IDwwPjsKKwkJY29vbGluZy1tYXgtc3RhdGUgPSA8MTI+OworCQkjY29vbGluZy1j
ZWxscyA9IDwyPjsKKwkJY29vbGluZy1sZXZlbHMgPSA8MCA0MCA2MCA4MCAxMDAKKwkJCQkgMTIw
IDE0MCAxNjAgMTgwIDIwMAorCQkJCSAyMjAgMjQwIDI1NT47CisJfTsKKworCXRoZXJtYWwtem9u
ZXMgeworCQlzb2MtdGhlcm1hbCB7CisJCQl0cmlwcyB7CisJCQkJdGhyZXNob2xkOiB0cmlwLXBv
aW50MCB7CisJCQkJCXRlbXBlcmF0dXJlID0gPDQwMDAwPjsKKwkJCQkJaHlzdGVyZXNpcyA9IDwx
MDAwMD47CisJCQkJCXR5cGUgPSAiYWN0aXZlIjsKKwkJCQl9OworCQkJCXRhcmdldDogdHJpcC1w
b2ludDEgeworCQkJCQl0ZW1wZXJhdHVyZSA9IDw1MDAwMD47CisJCQkJCWh5c3RlcmVzaXMgPSA8
MTAwMDA+OworCQkJCQl0eXBlID0gImFjdGl2ZSI7CisJCQkJfTsKKwkJCQlzb2NfY3JpdDogc29j
LWNyaXQgeworCQkJCQl0ZW1wZXJhdHVyZSA9IDw5NTAwMD47CisJCQkJCWh5c3RlcmVzaXMgPSA8
MTAwMDA+OworCQkJCQl0eXBlID0gImNyaXRpY2FsIjsKKwkJCQl9OworCQkJfTsKKworCQkJL2Rl
bGV0ZS1ub2RlLyBjb29saW5nLW1hcHM7CisJCQljb29saW5nLW1hcHMgeworCQkJCW1hcDAgewor
CQkJCQl0cmlwID0gPCZ0aHJlc2hvbGQ+OworCQkJCQljb29saW5nLWRldmljZSA9IDwmZmFuMCAx
IDM+OworCQkJCQljb250cmlidXRpb24gPSA8NDA5Nj47CisJCQkJfTsKKwkJCQltYXAxIHsKKwkJ
CQkJdHJpcCA9IDwmdGFyZ2V0PjsKKwkJCQkJY29vbGluZy1kZXZpY2UgPSA8JmZhbjAgMyAxMj47
CisJCQkJCWNvbnRyaWJ1dGlvbiA9IDw0MDk2PjsKKwkJCQl9OworCQkJCW1hcDIgeworCQkJCQl0
cmlwID0gPCZzb2NfY3JpdD47CisJCQkJCWNvb2xpbmctZGV2aWNlID0gPCZjcHUwIDggOD4sCisJ
CQkJCQkJIDwmY3B1MSA4IDg+LAorCQkJCQkJCSA8JmNwdTIgOCA4PiwKKwkJCQkJCQkgPCZjcHUz
IDggOD4sCisJCQkJCQkJIDwmZmFuMCA4IDg+OworCQkJCQljb250cmlidXRpb24gPSA8NDA5Nj47
CisJCQkJfTsKKwkJCX07CisJCX07CisJfTsKKwogCWxlZHMgewogCQljb21wYXRpYmxlID0gImdw
aW8tbGVkcyI7CiAKQEAgLTEwNCw2ICsxODYsMTEgQEAgdXNlcl9sZWQ6IGxlZC0xIHsKIAl9Owog
fTsKIAorJmNvZGVjIHsKKwkjc291bmQtZGFpLWNlbGxzID0gPDA+OworCXN0YXR1cyA9ICJva2F5
IjsKK307CisKICZjcHUwIHsKIAljcHUtc3VwcGx5ID0gPCZ2ZGRfYXJtPjsKIH07CkBAIC0xMjAs
NiArMjA3LDIwIEBAICZjcHUzIHsKIAljcHUtc3VwcGx5ID0gPCZ2ZGRfYXJtPjsKIH07CiAKKyZj
cHUwX29wcF90YWJsZSB7CisJb3BwLTEzOTIwMDAwMDAgeworCQlvcHAtaHogPSAvYml0cy8gNjQg
PDEzOTIwMDAwMDA+OworCQlvcHAtbWljcm92b2x0ID0gPDEzMjUwMDA+OworCQljbG9jay1sYXRl
bmN5LW5zID0gPDQwMDAwPjsKKwl9OworCW9wcC0xNTEyMDAwMDAwIHsKKwkJc3RhdHVzID0gImRp
c2FibGVkIjsKKwkJb3BwLWh6ID0gL2JpdHMvIDY0IDwxNTEyMDAwMDAwPjsKKwkJb3BwLW1pY3Jv
dm9sdCA9IDwxMzUwMDAwPjsKKwkJY2xvY2stbGF0ZW5jeS1ucyA9IDw0MDAwMD47CisJfTsKK307
CisKICZlbW1jIHsKIAlidXMtd2lkdGggPSA8OD47CiAJY2FwLW1tYy1oaWdoc3BlZWQ7CkBAIC0y
NzAsNiArMzcxLDIyIEBAIHJlZ3VsYXRvci1zdGF0ZS1tZW0gewogCX07CiB9OwogCismaTJzMCB7
CisJI3NvdW5kLWRhaS1jZWxscyA9IDwwPjsKKwlyb2NrY2hpcCxiY2xrLWZzID0gPDEyOD47CisJ
c3RhdHVzID0gIm9rYXkiOworfTsKKworJmkyczEgeworCSNzb3VuZC1kYWktY2VsbHMgPSA8MD47
CisJc3RhdHVzID0gIm9rYXkiOworfTsKKworJmdwdSB7CisJc3RhdHVzID0gIm9rYXkiOworCW1h
bGktc3VwcGx5ID0gPCZ2ZGRfbG9naWM+OworfTsKKwogJmlvX2RvbWFpbnMgewogCXN0YXR1cyA9
ICJva2F5IjsKIApAQCAtMjk0LDYgKzQxMSwxMiBAQCB1c2IyMF9ob3N0X2RydjogdXNiMjAtaG9z
dC1kcnYgewogCQkJcm9ja2NoaXAscGlucyA9IDwxIFJLX1BEMiBSS19GVU5DX0dQSU8gJnBjZmdf
cHVsbF9ub25lPjsKIAkJfTsKIAl9OworCisJdXNiMyB7CisJCXVzYjMwX2hvc3RfZHJ2OiB1c2Iz
MC1ob3N0LWRydiB7CisJCQlyb2NrY2hpcCxwaW5zID0gPDAgUktfUEEwIFJLX0ZVTkNfR1BJTyAm
cGNmZ19wdWxsX25vbmU+OworCQl9OworCX07CiB9OwogCiAmc2RtbWMgewpAQCAtMzE5LDI5ICs0
NDIsNDAgQEAgJnRzYWRjIHsKIAogJnUycGh5IHsKIAlzdGF0dXMgPSAib2theSI7CisKKwl1MnBo
eV9ob3N0IHsKKwkJc3RhdHVzID0gIm9rYXkiOworCX07CisKKwl1MnBoeV9vdGcgeworCQlzdGF0
dXMgPSAib2theSI7CisJCWRyX21vZGUgPSAiaG9zdCI7CisJfTsKIH07CiAKLSZ1MnBoeV9ob3N0
IHsKKyZ1c2IyMF9vdGcgewogCXN0YXR1cyA9ICJva2F5IjsKKwlkcl9tb2RlID0gImhvc3QiOwog
fTsKIAotJnUycGh5X290ZyB7CismdXNiX2hvc3QwX2VoY2kgewogCXN0YXR1cyA9ICJva2F5IjsK
IH07CiAKLSZ1YXJ0MiB7CismdXNiX2hvc3QwX29oY2kgewogCXN0YXR1cyA9ICJva2F5IjsKIH07
CiAKLSZ1c2IyMF9vdGcgeworJnVzYmRyZDMgewogCXN0YXR1cyA9ICJva2F5IjsKIH07CiAKLSZ1
c2JfaG9zdDBfZWhjaSB7CismdXNiZHJkX2R3YzMgeworCWRyX21vZGUgPSAiaG9zdCI7CiAJc3Rh
dHVzID0gIm9rYXkiOwogfTsKIAotJnVzYl9ob3N0MF9vaGNpIHsKKyZ1YXJ0MiB7CiAJc3RhdHVz
ID0gIm9rYXkiOwogfTsKIApkaWZmIC0tZ2l0IGEvYXJjaC9hcm02NC9ib290L2R0cy9yb2NrY2hp
cC9yazMzMjguZHRzaSBiL2FyY2gvYXJtNjQvYm9vdC9kdHMvcm9ja2NoaXAvcmszMzI4LmR0c2kK
aW5kZXggNzJlNjU1MDIwNTYwLi5lZTdhYmRlMWMzMWQgMTAwNjQ0Ci0tLSBhL2FyY2gvYXJtNjQv
Ym9vdC9kdHMvcm9ja2NoaXAvcmszMzI4LmR0c2kKKysrIGIvYXJjaC9hcm02NC9ib290L2R0cy9y
b2NrY2hpcC9yazMzMjguZHRzaQpAQCAtOTgyLDYgKzk4MiwzNCBAQCB1c2JfaG9zdDBfb2hjaTog
dXNiQGZmNWQwMDAwIHsKIAkJc3RhdHVzID0gImRpc2FibGVkIjsKIAl9OwogCisgICAgICAgdXNi
ZHJkMzogdXNiQGZmNjAwMDAwIHsKKwkJY29tcGF0aWJsZSA9ICJyb2NrY2hpcCxyazMzMjgtZHdj
MyIsICJyb2NrY2hpcCxyazMzOTktZHdjMyI7CisJCWNsb2NrcyA9IDwmY3J1IFNDTEtfVVNCM09U
R19SRUY+LCA8JmNydSBTQ0xLX1VTQjNPVEdfU1VTUEVORD4sCisJCQkgPCZjcnUgQUNMS19VU0Iz
T1RHPjsKKwkJY2xvY2stbmFtZXMgPSAicmVmX2NsayIsICJzdXNwZW5kX2NsayIsCisJCQkgICAg
ICAiYnVzX2NsayI7CisJCSNhZGRyZXNzLWNlbGxzID0gPDI+OworCQkjc2l6ZS1jZWxscyA9IDwy
PjsKKwkJcmFuZ2VzOworCQlzdGF0dXMgPSAiZGlzYWJsZWQiOworCisJCXVzYmRyZF9kd2MzOiBk
d2MzQGZmNjAwMDAwIHsKKwkJCWNvbXBhdGlibGUgPSAic25wcyxkd2MzIjsKKwkJCXJlZyA9IDww
eDAgMHhmZjYwMDAwMCAweDAgMHgxMDAwMDA+OworCQkJaW50ZXJydXB0cyA9IDxHSUNfU1BJIDY3
IElSUV9UWVBFX0xFVkVMX0hJR0g+OworCQkJZHJfbW9kZSA9ICJvdGciOworCQkJcGh5X3R5cGUg
PSAidXRtaV93aWRlIjsKKwkJCXNucHMsZGlzX2VuYmxzbHBtX3F1aXJrOworCQkJc25wcyxkaXMt
dTItZnJlZWNsay1leGlzdHMtcXVpcms7CisJCQlzbnBzLGRpc191Ml9zdXNwaHlfcXVpcms7CisJ
CQlzbnBzLGRpc191M19zdXNwaHlfcXVpcms7CisJCQlzbnBzLGRpcy1kZWwtcGh5LXBvd2VyLWNo
Zy1xdWlyazsKKwkJCXNucHMsZGlzLXR4LWlwZ2FwLWxpbmVjaGVjay1xdWlyazsKKwkJCXNucHMs
eGhjaS10cmItZW50LXF1aXJrOworCQkJc3RhdHVzID0gImRpc2FibGVkIjsKKwkJfTsKKwl9Owor
CiAJZ2ljOiBpbnRlcnJ1cHQtY29udHJvbGxlckBmZjgxMTAwMCB7CiAJCWNvbXBhdGlibGUgPSAi
YXJtLGdpYy00MDAiOwogCQkjaW50ZXJydXB0LWNlbGxzID0gPDM+OwpkaWZmIC0tZ2l0IGEvZHJp
dmVycy9waHkvcm9ja2NoaXAvS2NvbmZpZyBiL2RyaXZlcnMvcGh5L3JvY2tjaGlwL0tjb25maWcK
aW5kZXggMDgyNGI5ZGQ1NjgzLi5mOGM0YzBkNzE5ZWMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvcGh5
L3JvY2tjaGlwL0tjb25maWcKKysrIGIvZHJpdmVycy9waHkvcm9ja2NoaXAvS2NvbmZpZwpAQCAt
MzUsNiArMzUsMTQgQEAgY29uZmlnIFBIWV9ST0NLQ0hJUF9JTk5PX1VTQjIKIAloZWxwCiAJICBT
dXBwb3J0IGZvciBSb2NrY2hpcCBVU0IyLjAgUEhZIHdpdGggSW5ub3NpbGljb24gSVAgYmxvY2su
CiAKK2NvbmZpZyBQSFlfUk9DS0NISVBfSU5OT19VU0IzCisJdHJpc3RhdGUgIlJvY2tjaGlwIElO
Tk8gVVNCIDMuMCBQSFkgRHJpdmVyIgorCWRlcGVuZHMgb24gQVJDSF9ST0NLQ0hJUCAmJiBPRgor
CXNlbGVjdCBHRU5FUklDX1BIWQorCXNlbGVjdCBVU0JfUEhZCisJaGVscAorCSAgU3VwcG9ydCBm
b3IgUm9ja2NoaXAgVVNCIDMuMCBQSFkgd2l0aCBJbm5vc2lsaWNvbiBJUCBibG9jay4KKwogY29u
ZmlnIFBIWV9ST0NLQ0hJUF9JTk5PX0RTSURQSFkKIAl0cmlzdGF0ZSAiUm9ja2NoaXAgSW5ub3Np
bGljb24gTUlQSS9MVkRTL1RUTCBQSFkgZHJpdmVyIgogCWRlcGVuZHMgb24gKEFSQ0hfUk9DS0NI
SVAgfHwgQ09NUElMRV9URVNUKSAmJiBPRgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9waHkvcm9ja2No
aXAvTWFrZWZpbGUgYi9kcml2ZXJzL3BoeS9yb2NrY2hpcC9NYWtlZmlsZQppbmRleCA5ZjU5YTgx
ZTRlMGQuLjAyY2QyMDhlOGUwMCAxMDA2NDQKLS0tIGEvZHJpdmVycy9waHkvcm9ja2NoaXAvTWFr
ZWZpbGUKKysrIGIvZHJpdmVycy9waHkvcm9ja2NoaXAvTWFrZWZpbGUKQEAgLTQsNiArNCw3IEBA
IG9iai0kKENPTkZJR19QSFlfUk9DS0NISVBfRU1NQykJCSs9IHBoeS1yb2NrY2hpcC1lbW1jLm8K
IG9iai0kKENPTkZJR19QSFlfUk9DS0NISVBfSU5OT19EU0lEUEhZKQkrPSBwaHktcm9ja2NoaXAt
aW5uby1kc2lkcGh5Lm8KIG9iai0kKENPTkZJR19QSFlfUk9DS0NISVBfSU5OT19IRE1JKQkrPSBw
aHktcm9ja2NoaXAtaW5uby1oZG1pLm8KIG9iai0kKENPTkZJR19QSFlfUk9DS0NISVBfSU5OT19V
U0IyKQkrPSBwaHktcm9ja2NoaXAtaW5uby11c2IyLm8KK29iai0kKENPTkZJR19QSFlfUk9DS0NI
SVBfSU5OT19VU0IzKQkrPSBwaHktcm9ja2NoaXAtaW5uby11c2IzLm8KIG9iai0kKENPTkZJR19Q
SFlfUk9DS0NISVBfUENJRSkJCSs9IHBoeS1yb2NrY2hpcC1wY2llLm8KIG9iai0kKENPTkZJR19Q
SFlfUk9DS0NISVBfVFlQRUMpCSs9IHBoeS1yb2NrY2hpcC10eXBlYy5vCiBvYmotJChDT05GSUdf
UEhZX1JPQ0tDSElQX1VTQikJCSs9IHBoeS1yb2NrY2hpcC11c2IubwpkaWZmIC0tZ2l0IGEvZHJp
dmVycy9waHkvcm9ja2NoaXAvcGh5LXJvY2tjaGlwLWlubm8tdXNiMy5jIGIvZHJpdmVycy9waHkv
cm9ja2NoaXAvcGh5LXJvY2tjaGlwLWlubm8tdXNiMy5jCm5ldyBmaWxlIG1vZGUgMTAwNjQ0Cmlu
ZGV4IDAwMDAwMDAwMDAwMC4uODE2NDI1MGJhY2E5Ci0tLSAvZGV2L251bGwKKysrIGIvZHJpdmVy
cy9waHkvcm9ja2NoaXAvcGh5LXJvY2tjaGlwLWlubm8tdXNiMy5jCkBAIC0wLDAgKzEsMTE1MCBA
QAorLyoKKyAqIFJvY2tjaGlwIFVTQiAzLjAgUEhZIHdpdGggSW5ub3NpbGljb24gSVAgYmxvY2sg
ZHJpdmVyCisgKgorICogQ29weXJpZ2h0IChDKSAyMDE2IEZ1emhvdSBSb2NrY2hpcCBFbGVjdHJv
bmljcyBDby4sIEx0ZAorICoKKyAqIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOyB5b3Ug
Y2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5CisgKiBpdCB1bmRlciB0aGUgdGVybXMg
b2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieQorICogdGhl
IEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbjsgZWl0aGVyIHZlcnNpb24gMiBvZiB0aGUgTGljZW5z
ZSwgb3IKKyAqIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uCisgKgorICogVGhp
cyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2Vm
dWwsCisgKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGll
ZCB3YXJyYW50eSBvZgorICogTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElD
VUxBUiBQVVJQT1NFLiAgU2VlIHRoZQorICogR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9y
IG1vcmUgZGV0YWlscy4KKyAqLworCisjaW5jbHVkZSA8bGludXgvY2xrLmg+CisjaW5jbHVkZSA8
bGludXgvZGVsYXkuaD4KKyNpbmNsdWRlIDxsaW51eC9kZWJ1Z2ZzLmg+CisjaW5jbHVkZSA8bGlu
dXgvZ3Bpby9jb25zdW1lci5oPgorI2luY2x1ZGUgPGxpbnV4L2ludGVycnVwdC5oPgorI2luY2x1
ZGUgPGxpbnV4L2lvLmg+CisjaW5jbHVkZSA8bGludXgva2VybmVsLmg+CisjaW5jbHVkZSA8bGlu
dXgvbWZkL3N5c2Nvbi5oPgorI2luY2x1ZGUgPGxpbnV4L21vZHVsZS5oPgorI2luY2x1ZGUgPGxp
bnV4L29mLmg+CisjaW5jbHVkZSA8bGludXgvb2ZfYWRkcmVzcy5oPgorI2luY2x1ZGUgPGxpbnV4
L29mX2lycS5oPgorI2luY2x1ZGUgPGxpbnV4L29mX3BsYXRmb3JtLmg+CisjaW5jbHVkZSA8bGlu
dXgvcGh5L3BoeS5oPgorI2luY2x1ZGUgPGxpbnV4L3BsYXRmb3JtX2RldmljZS5oPgorI2luY2x1
ZGUgPGxpbnV4L3JlZ21hcC5oPgorI2luY2x1ZGUgPGxpbnV4L3Jlc2V0Lmg+CisjaW5jbHVkZSA8
bGludXgvdXNiL3BoeS5oPgorI2luY2x1ZGUgPGxpbnV4L3VhY2Nlc3MuaD4KKworI2RlZmluZSBV
M1BIWV9QT1JUX05VTQkyCisjZGVmaW5lIFUzUEhZX01BWF9DTEtTCTQKKyNkZWZpbmUgQklUX1dS
SVRFQUJMRV9TSElGVAkxNgorI2RlZmluZSBTQ0hFRFVMRV9ERUxBWQkoNjAgKiBIWikKKworI2Rl
ZmluZSBVM1BIWV9BUEJfUlNUCUJJVCgwKQorI2RlZmluZSBVM1BIWV9QT1JfUlNUCUJJVCgxKQor
I2RlZmluZSBVM1BIWV9NQUNfUlNUCUJJVCgyKQorCitzdHJ1Y3Qgcm9ja2NoaXBfdTNwaHk7Citz
dHJ1Y3Qgcm9ja2NoaXBfdTNwaHlfcG9ydDsKKworZW51bSByb2NrY2hpcF91M3BoeV90eXBlIHsK
KwlVM1BIWV9UWVBFX1BJUEUsCisJVTNQSFlfVFlQRV9VVE1JLAorfTsKKworZW51bSByb2NrY2hp
cF91M3BoeV9waXBlX3B3ciB7CisJUElQRV9QV1JfUDAJPSAwLAorCVBJUEVfUFdSX1AxCT0gMSwK
KwlQSVBFX1BXUl9QMgk9IDIsCisJUElQRV9QV1JfUDMJPSAzLAorCVBJUEVfUFdSX01BWAk9IDQs
Cit9OworCitlbnVtIHJvY2tjaGlwX3UzcGh5X3Jlc3RfcmVxIHsKKwlVM19QT1JfUlNUTgk9IDAs
CisJVTJfUE9SX1JTVE4JPSAxLAorCVBJUEVfTUFDX1JTVE4JPSAyLAorCVVUTUlfTUFDX1JTVE4J
PSAzLAorCVBJUEVfQVBCX1JTVE4JPSA0LAorCVVUTUlfQVBCX1JTVE4JPSA1LAorCVUzUEhZX1JF
U0VUX01BWAk9IDYsCit9OworCitlbnVtIHJvY2tjaGlwX3UzcGh5X3V0bWlfc3RhdGUgeworCVBI
WV9VVE1JX0hTX09OTElORQk9IDAsCisJUEhZX1VUTUlfRElTQ09OTkVDVAk9IDEsCisJUEhZX1VU
TUlfQ09OTkVDVAk9IDIsCisJUEhZX1VUTUlfRlNfTFNfT05MSU5FCT0gNCwKK307CisKKy8qCisg
KiBAcnZhbHVlOiByZXNldCB2YWx1ZQorICogQGR2YWx1ZTogZGVzaXJlZCB2YWx1ZQorICovCitz
dHJ1Y3QgdTNwaHlfcmVnIHsKKwl1bnNpZ25lZCBpbnQJb2Zmc2V0OworCXVuc2lnbmVkIGludAli
aXRlbmQ7CisJdW5zaWduZWQgaW50CWJpdHN0YXJ0OworCXVuc2lnbmVkIGludAlydmFsdWU7CisJ
dW5zaWduZWQgaW50CWR2YWx1ZTsKK307CisKK3N0cnVjdCByb2NrY2hpcF91M3BoeV9ncmZjZmcg
eworCXN0cnVjdCB1M3BoeV9yZWcJdW1fc3VzcGVuZDsKKwlzdHJ1Y3QgdTNwaHlfcmVnCWxzX2Rl
dF9lbjsKKwlzdHJ1Y3QgdTNwaHlfcmVnCWxzX2RldF9zdDsKKwlzdHJ1Y3QgdTNwaHlfcmVnCXVt
X2xzOworCXN0cnVjdCB1M3BoeV9yZWcJdW1faHN0ZGN0OworCXN0cnVjdCB1M3BoeV9yZWcJdTJf
b25seV9jdHJsOworCXN0cnVjdCB1M3BoeV9yZWcJdTNfZGlzYWJsZTsKKwlzdHJ1Y3QgdTNwaHlf
cmVnCXBwX3B3cl9zdDsKKwlzdHJ1Y3QgdTNwaHlfcmVnCXBwX3B3cl9lbltQSVBFX1BXUl9NQVhd
OworfTsKKworLyoqCisgKiBzdHJ1Y3Qgcm9ja2NoaXBfdTNwaHlfYXBiY2ZnOiB1c2IzLXBoeSBh
cGIgY29uZmlndXJhdGlvbi4KKyAqIEB1Ml9wcmVfZW1wOiB1c2IyLXBoeSBwcmUtZW1waGFzaXMg
dHVuaW5nLgorICogQHUyX3ByZV9lbXBfc3RoOiB1c2IyLXBoeSBwcmUtZW1waGFzaXMgc3RyZW5n
dGggdHVuaW5nLgorICogQHUyX29kdF90dW5pbmc6IHVzYjItcGh5IG9kdCA0NW9obSB0dW5pbmcu
CisgKi8KK3N0cnVjdCByb2NrY2hpcF91M3BoeV9hcGJjZmcgeworCXVuc2lnbmVkIGludAl1Ml9w
cmVfZW1wOworCXVuc2lnbmVkIGludAl1Ml9wcmVfZW1wX3N0aDsKKwl1bnNpZ25lZCBpbnQJdTJf
b2R0X3R1bmluZzsKK307CisKK3N0cnVjdCByb2NrY2hpcF91M3BoeV9jZmcgeworCXVuc2lnbmVk
IGludCByZWc7CisJY29uc3Qgc3RydWN0IHJvY2tjaGlwX3UzcGh5X2dyZmNmZyBncmZjZmc7CisK
KwlpbnQgKCpwaHlfcGlwZV9wb3dlcikoc3RydWN0IHJvY2tjaGlwX3UzcGh5ICosCisJCQkgICAg
ICBzdHJ1Y3Qgcm9ja2NoaXBfdTNwaHlfcG9ydCAqLAorCQkJICAgICAgYm9vbCBvbik7CisJaW50
ICgqcGh5X3R1bmluZykoc3RydWN0IHJvY2tjaGlwX3UzcGh5ICosCisJCQkgIHN0cnVjdCByb2Nr
Y2hpcF91M3BoeV9wb3J0ICosCisJCQkgIHN0cnVjdCBkZXZpY2Vfbm9kZSAqKTsKKwlpbnQgKCpw
aHlfY2FsaWJyYXRlKShzdHJ1Y3Qgcm9ja2NoaXBfdTNwaHkgKiwKKwkJCSAgIHN0cnVjdCByb2Nr
Y2hpcF91M3BoeV9wb3J0ICopOworfTsKKworc3RydWN0IHJvY2tjaGlwX3UzcGh5X3BvcnQgewor
CXN0cnVjdCBwaHkJKnBoeTsKKwl2b2lkIF9faW9tZW0JKmJhc2U7CisJdW5zaWduZWQgaW50CWlu
ZGV4OworCXVuc2lnbmVkIGNoYXIJdHlwZTsKKwlib29sCQlzdXNwZW5kZWQ7CisJYm9vbAkJcmVm
Y2xrXzI1bV9xdWlyazsKKwlzdHJ1Y3QgbXV0ZXgJbXV0ZXg7IC8qIG11dGV4IGZvciB1cGRhdGlu
ZyByZWdpc3RlciAqLworCXN0cnVjdCBkZWxheWVkX3dvcmsJdW1fc21fd29yazsKK307CisKK3N0
cnVjdCByb2NrY2hpcF91M3BoeSB7CisJc3RydWN0IGRldmljZSAqZGV2OworCXN0cnVjdCByZWdt
YXAgKnUzcGh5X2dyZjsKKwlzdHJ1Y3QgcmVnbWFwICpncmY7CisJaW50IHVtX2xzX2lycTsKKwlz
dHJ1Y3QgY2xrICpjbGtzW1UzUEhZX01BWF9DTEtTXTsKKwlzdHJ1Y3QgZGVudHJ5ICpyb290Owor
CXN0cnVjdCBncGlvX2Rlc2MgKnZidXNfZHJ2X2dwaW87CisJc3RydWN0IHJlc2V0X2NvbnRyb2wg
KnJzdHNbVTNQSFlfUkVTRVRfTUFYXTsKKwlzdHJ1Y3Qgcm9ja2NoaXBfdTNwaHlfYXBiY2ZnIGFw
YmNmZzsKKwljb25zdCBzdHJ1Y3Qgcm9ja2NoaXBfdTNwaHlfY2ZnICpjZmdzOworCXN0cnVjdCBy
b2NrY2hpcF91M3BoeV9wb3J0IHBvcnRzW1UzUEhZX1BPUlRfTlVNXTsKKwlzdHJ1Y3QgdXNiX3Bo
eSB1c2JfcGh5OworfTsKKworc3RhdGljIGlubGluZSBpbnQgcGFyYW1fd3JpdGUodm9pZCBfX2lv
bWVtICpiYXNlLAorCQkJICAgICAgY29uc3Qgc3RydWN0IHUzcGh5X3JlZyAqcmVnLCBib29sIGRl
c2lyZWQpCit7CisJdW5zaWduZWQgaW50IHZhbCwgbWFzazsKKwl1bnNpZ25lZCBpbnQgdG1wID0g
ZGVzaXJlZCA/IHJlZy0+ZHZhbHVlIDogcmVnLT5ydmFsdWU7CisJaW50IHJldCA9IDA7CisKKwlt
YXNrID0gR0VOTUFTSyhyZWctPmJpdGVuZCwgcmVnLT5iaXRzdGFydCk7CisJdmFsID0gKHRtcCA8
PCByZWctPmJpdHN0YXJ0KSB8IChtYXNrIDw8IEJJVF9XUklURUFCTEVfU0hJRlQpOworCXJldCA9
IHJlZ21hcF93cml0ZShiYXNlLCByZWctPm9mZnNldCwgdmFsKTsKKworCXJldHVybiByZXQ7Cit9
CisKK3N0YXRpYyBpbmxpbmUgYm9vbCBwYXJhbV9leHBlZCh2b2lkIF9faW9tZW0gKmJhc2UsCisJ
CQkgICAgICAgY29uc3Qgc3RydWN0IHUzcGh5X3JlZyAqcmVnLAorCQkJICAgICAgIHVuc2lnbmVk
IGludCB2YWx1ZSkKK3sKKwlpbnQgcmV0OworCXVuc2lnbmVkIGludCB0bXAsIG9yaWc7CisJdW5z
aWduZWQgaW50IG1hc2sgPSBHRU5NQVNLKHJlZy0+Yml0ZW5kLCByZWctPmJpdHN0YXJ0KTsKKwor
CXJldCA9IHJlZ21hcF9yZWFkKGJhc2UsIHJlZy0+b2Zmc2V0LCAmb3JpZyk7CisJaWYgKHJldCkK
KwkJcmV0dXJuIGZhbHNlOworCisJdG1wID0gKG9yaWcgJiBtYXNrKSA+PiByZWctPmJpdHN0YXJ0
OworCXJldHVybiB0bXAgPT0gdmFsdWU7Cit9CisKK3N0YXRpYyBpbnQgcm9ja2NoaXBfdTNwaHlf
dXNiMl9vbmx5X3Nob3coc3RydWN0IHNlcV9maWxlICpzLCB2b2lkICp1bnVzZWQpCit7CisJc3Ry
dWN0IHJvY2tjaGlwX3UzcGh5CSp1M3BoeSA9IHMtPnByaXZhdGU7CisKKwlpZiAocGFyYW1fZXhw
ZWQodTNwaHktPnUzcGh5X2dyZiwgJnUzcGh5LT5jZmdzLT5ncmZjZmcudTJfb25seV9jdHJsLCAx
KSkKKwkJZGV2X2luZm8odTNwaHktPmRldiwgInUyXG4iKTsKKwllbHNlCisJCWRldl9pbmZvKHUz
cGh5LT5kZXYsICJ1M1xuIik7CisKKwlyZXR1cm4gMDsKK30KKworc3RhdGljIGludCByb2NrY2hp
cF91M3BoeV91c2IyX29ubHlfb3BlbihzdHJ1Y3QgaW5vZGUgKmlub2RlLAorCQkJCQkgc3RydWN0
IGZpbGUgKmZpbGUpCit7CisJcmV0dXJuIHNpbmdsZV9vcGVuKGZpbGUsIHJvY2tjaGlwX3UzcGh5
X3VzYjJfb25seV9zaG93LAorCQkJICAgaW5vZGUtPmlfcHJpdmF0ZSk7Cit9CisKK3N0YXRpYyBz
c2l6ZV90IHJvY2tjaGlwX3UzcGh5X3VzYjJfb25seV93cml0ZShzdHJ1Y3QgZmlsZSAqZmlsZSwK
KwkJCQkJICAgICAgY29uc3QgY2hhciBfX3VzZXIgKnVidWYsCisJCQkJCSAgICAgIHNpemVfdCBj
b3VudCwgbG9mZl90ICpwcG9zKQoreworCXN0cnVjdCBzZXFfZmlsZQkJCSpzID0gZmlsZS0+cHJp
dmF0ZV9kYXRhOworCXN0cnVjdCByb2NrY2hpcF91M3BoeQkJKnUzcGh5ID0gcy0+cHJpdmF0ZTsK
KwlzdHJ1Y3Qgcm9ja2NoaXBfdTNwaHlfcG9ydAkqdTNwaHlfcG9ydDsKKwljaGFyCQkJCWJ1Zlsz
Ml07CisJdTgJCQkJaW5kZXg7CisKKwlpZiAoY29weV9mcm9tX3VzZXIoJmJ1ZiwgdWJ1ZiwgbWlu
X3Qoc2l6ZV90LCBzaXplb2YoYnVmKSAtIDEsIGNvdW50KSkpCisJCXJldHVybiAtRUZBVUxUOwor
CisJaWYgKCFzdHJuY21wKGJ1ZiwgInUzIiwgMikgJiYKKwkgICAgcGFyYW1fZXhwZWQodTNwaHkt
PnUzcGh5X2dyZiwKKwkJCSZ1M3BoeS0+Y2Zncy0+Z3JmY2ZnLnUyX29ubHlfY3RybCwgMSkpIHsK
KwkJZGV2X2luZm8odTNwaHktPmRldiwgIlNldCB1c2IzLjAgYW5kIHVzYjIuMCBtb2RlIHN1Y2Nl
c3NmdWxseVxuIik7CisKKwkJZ3Bpb2Rfc2V0X3ZhbHVlX2NhbnNsZWVwKHUzcGh5LT52YnVzX2Ry
dl9ncGlvLCAwKTsKKworCQlwYXJhbV93cml0ZSh1M3BoeS0+Z3JmLAorCQkJICAgICZ1M3BoeS0+
Y2Zncy0+Z3JmY2ZnLnUzX2Rpc2FibGUsIGZhbHNlKTsKKwkJcGFyYW1fd3JpdGUodTNwaHktPnUz
cGh5X2dyZiwKKwkJCSAgICAmdTNwaHktPmNmZ3MtPmdyZmNmZy51Ml9vbmx5X2N0cmwsIGZhbHNl
KTsKKworCQlmb3IgKGluZGV4ID0gMDsgaW5kZXggPCBVM1BIWV9QT1JUX05VTTsgaW5kZXgrKykg
eworCQkJdTNwaHlfcG9ydCA9ICZ1M3BoeS0+cG9ydHNbaW5kZXhdOworCQkJLyogZW5hYmxlIHUz
IHJ4IHRlcm1pbWF0aW9uICovCisJCQlpZiAodTNwaHlfcG9ydC0+dHlwZSA9PSBVM1BIWV9UWVBF
X1BJUEUpCisJCQkJd3JpdGVsKDB4MzAsIHUzcGh5X3BvcnQtPmJhc2UgKyAweGQ4KTsKKwkJfQor
CisJCWF0b21pY19ub3RpZmllcl9jYWxsX2NoYWluKCZ1M3BoeS0+dXNiX3BoeS5ub3RpZmllciwg
MCwgTlVMTCk7CisKKwkJZ3Bpb2Rfc2V0X3ZhbHVlX2NhbnNsZWVwKHUzcGh5LT52YnVzX2Rydl9n
cGlvLCAxKTsKKwl9IGVsc2UgaWYgKCFzdHJuY21wKGJ1ZiwgInUyIiwgMikgJiYKKwkJICAgcGFy
YW1fZXhwZWQodTNwaHktPnUzcGh5X2dyZiwKKwkJCSAgICAgICAmdTNwaHktPmNmZ3MtPmdyZmNm
Zy51Ml9vbmx5X2N0cmwsIDApKSB7CisJCWRldl9pbmZvKHUzcGh5LT5kZXYsICJTZXQgdXNiMi4w
IG9ubHkgbW9kZSBzdWNjZXNzZnVsbHlcbiIpOworCisJCWdwaW9kX3NldF92YWx1ZV9jYW5zbGVl
cCh1M3BoeS0+dmJ1c19kcnZfZ3BpbywgMCk7CisKKwkJcGFyYW1fd3JpdGUodTNwaHktPmdyZiwK
KwkJCSAgICAmdTNwaHktPmNmZ3MtPmdyZmNmZy51M19kaXNhYmxlLCB0cnVlKTsKKwkJcGFyYW1f
d3JpdGUodTNwaHktPnUzcGh5X2dyZiwKKwkJCSAgICAmdTNwaHktPmNmZ3MtPmdyZmNmZy51Ml9v
bmx5X2N0cmwsIHRydWUpOworCisJCWZvciAoaW5kZXggPSAwOyBpbmRleCA8IFUzUEhZX1BPUlRf
TlVNOyBpbmRleCsrKSB7CisJCQl1M3BoeV9wb3J0ID0gJnUzcGh5LT5wb3J0c1tpbmRleF07CisJ
CQkvKiBkaXNhYmxlIHUzIHJ4IHRlcm1pbWF0aW9uICovCisJCQlpZiAodTNwaHlfcG9ydC0+dHlw
ZSA9PSBVM1BIWV9UWVBFX1BJUEUpCisJCQkJd3JpdGVsKDB4MjAsIHUzcGh5X3BvcnQtPmJhc2Ug
KyAweGQ4KTsKKwkJfQorCisJCWF0b21pY19ub3RpZmllcl9jYWxsX2NoYWluKCZ1M3BoeS0+dXNi
X3BoeS5ub3RpZmllciwgMCwgTlVMTCk7CisKKwkJZ3Bpb2Rfc2V0X3ZhbHVlX2NhbnNsZWVwKHUz
cGh5LT52YnVzX2Rydl9ncGlvLCAxKTsKKwl9IGVsc2UgeworCQlkZXZfaW5mbyh1M3BoeS0+ZGV2
LCAiU2FtZSBvciBpbGxlZ2FsIG1vZGVcbiIpOworCX0KKworCXJldHVybiBjb3VudDsKK30KKwor
c3RhdGljIGNvbnN0IHN0cnVjdCBmaWxlX29wZXJhdGlvbnMgcm9ja2NoaXBfdTNwaHlfdXNiMl9v
bmx5X2ZvcHMgPSB7CisJLm9wZW4JCQk9IHJvY2tjaGlwX3UzcGh5X3VzYjJfb25seV9vcGVuLAor
CS53cml0ZQkJCT0gcm9ja2NoaXBfdTNwaHlfdXNiMl9vbmx5X3dyaXRlLAorCS5yZWFkCQkJPSBz
ZXFfcmVhZCwKKwkubGxzZWVrCQkJPSBzZXFfbHNlZWssCisJLnJlbGVhc2UJCT0gc2luZ2xlX3Jl
bGVhc2UsCit9OworCitpbnQgcm9ja2NoaXBfdTNwaHlfZGVidWdmc19pbml0KHN0cnVjdCByb2Nr
Y2hpcF91M3BoeSAqdTNwaHkpCit7CisJc3RydWN0IGRlbnRyeQkJKnJvb3Q7CisJc3RydWN0IGRl
bnRyeQkJKmZpbGU7CisJaW50CQkJcmV0OworCisJcm9vdCA9IGRlYnVnZnNfY3JlYXRlX2Rpcihk
ZXZfbmFtZSh1M3BoeS0+ZGV2KSwgTlVMTCk7CisJaWYgKCFyb290KSB7CisJCXJldCA9IC1FTk9N
RU07CisJCWdvdG8gZXJyMDsKKwl9CisKKwl1M3BoeS0+cm9vdCA9IHJvb3Q7CisKKwlmaWxlID0g
ZGVidWdmc19jcmVhdGVfZmlsZSgidTNwaHlfbW9kZSIsIDA2NDQsIHJvb3QsCisJCQkJICAgdTNw
aHksICZyb2NrY2hpcF91M3BoeV91c2IyX29ubHlfZm9wcyk7CisJaWYgKCFmaWxlKSB7CisJCXJl
dCA9IC1FTk9NRU07CisJCWdvdG8gZXJyMTsKKwl9CisJcmV0dXJuIDA7CisKK2VycjE6CisJZGVi
dWdmc19yZW1vdmVfcmVjdXJzaXZlKHJvb3QpOworZXJyMDoKKwlyZXR1cm4gcmV0OworfQorCitz
dGF0aWMgY29uc3QgY2hhciAqZ2V0X3Jlc3RfbmFtZShlbnVtIHJvY2tjaGlwX3UzcGh5X3Jlc3Rf
cmVxIHJzdCkKK3sKKwlzd2l0Y2ggKHJzdCkgeworCWNhc2UgVTJfUE9SX1JTVE46CisJCXJldHVy
biAidTNwaHktdTItcG9yIjsKKwljYXNlIFUzX1BPUl9SU1ROOgorCQlyZXR1cm4gInUzcGh5LXUz
LXBvciI7CisJY2FzZSBQSVBFX01BQ19SU1ROOgorCQlyZXR1cm4gInUzcGh5LXBpcGUtbWFjIjsK
KwljYXNlIFVUTUlfTUFDX1JTVE46CisJCXJldHVybiAidTNwaHktdXRtaS1tYWMiOworCWNhc2Ug
VVRNSV9BUEJfUlNUTjoKKwkJcmV0dXJuICJ1M3BoeS11dG1pLWFwYiI7CisJY2FzZSBQSVBFX0FQ
Ql9SU1ROOgorCQlyZXR1cm4gInUzcGh5LXBpcGUtYXBiIjsKKwlkZWZhdWx0OgorCQlyZXR1cm4g
ImludmFsaWQiOworCX0KK30KKworc3RhdGljIHZvaWQgcm9ja2NoaXBfdTNwaHlfcmVzdF9kZWFz
c2VydChzdHJ1Y3Qgcm9ja2NoaXBfdTNwaHkgKnUzcGh5LAorCQkJCQkgdW5zaWduZWQgaW50IGZs
YWcpCit7CisJaW50IHJzdDsKKworCWlmIChmbGFnICYgVTNQSFlfQVBCX1JTVCkgeworCQlkZXZf
ZGJnKHUzcGh5LT5kZXYsICJkZWFzc2VydCBBUEIgYnVzIGludGVyZmFjZSByZXNldFxuIik7CisJ
CWZvciAocnN0ID0gUElQRV9BUEJfUlNUTjsgcnN0IDw9IFVUTUlfQVBCX1JTVE47IHJzdCsrKSB7
CisJCQlpZiAodTNwaHktPnJzdHNbcnN0XSkKKwkJCQlyZXNldF9jb250cm9sX2RlYXNzZXJ0KHUz
cGh5LT5yc3RzW3JzdF0pOworCQl9CisJfQorCisJaWYgKGZsYWcgJiBVM1BIWV9QT1JfUlNUKSB7
CisJCXVzbGVlcF9yYW5nZSgxMiwgMTUpOworCQlkZXZfZGJnKHUzcGh5LT5kZXYsICJkZWFzc2Vy
dCB1MiBhbmQgdTMgcGh5IHBvd2VyIG9uIHJlc2V0XG4iKTsKKwkJZm9yIChyc3QgPSBVM19QT1Jf
UlNUTjsgcnN0IDw9IFUyX1BPUl9SU1ROOyByc3QrKykgeworCQkJaWYgKHUzcGh5LT5yc3RzW3Jz
dF0pCisJCQkJcmVzZXRfY29udHJvbF9kZWFzc2VydCh1M3BoeS0+cnN0c1tyc3RdKTsKKwkJfQor
CX0KKworCWlmIChmbGFnICYgVTNQSFlfTUFDX1JTVCkgeworCQl1c2xlZXBfcmFuZ2UoMTIwMCwg
MTUwMCk7CisJCWRldl9kYmcodTNwaHktPmRldiwgImRlYXNzZXJ0IHBpcGUgYW5kIHV0bWkgTUFD
IHJlc2V0XG4iKTsKKwkJZm9yIChyc3QgPSBQSVBFX01BQ19SU1ROOyByc3QgPD0gVVRNSV9NQUNf
UlNUTjsgcnN0KyspCisJCQlpZiAodTNwaHktPnJzdHNbcnN0XSkKKwkJCQlyZXNldF9jb250cm9s
X2RlYXNzZXJ0KHUzcGh5LT5yc3RzW3JzdF0pOworCX0KK30KKworc3RhdGljIHZvaWQgcm9ja2No
aXBfdTNwaHlfcmVzdF9hc3NlcnQoc3RydWN0IHJvY2tjaGlwX3UzcGh5ICp1M3BoeSkKK3sKKwlp
bnQgcnN0OworCisJZGV2X2RiZyh1M3BoeS0+ZGV2LCAiYXNzZXJ0IHUzcGh5IHJlc2V0XG4iKTsK
Kwlmb3IgKHJzdCA9IDA7IHJzdCA8IFUzUEhZX1JFU0VUX01BWDsgcnN0KyspCisJCWlmICh1M3Bo
eS0+cnN0c1tyc3RdKQorCQkJcmVzZXRfY29udHJvbF9hc3NlcnQodTNwaHktPnJzdHNbcnN0XSk7
Cit9CisKK3N0YXRpYyBpbnQgcm9ja2NoaXBfdTNwaHlfY2xrX2VuYWJsZShzdHJ1Y3Qgcm9ja2No
aXBfdTNwaHkgKnUzcGh5KQoreworCWludCByZXQsIGNsazsKKworCWZvciAoY2xrID0gMDsgY2xr
IDwgVTNQSFlfTUFYX0NMS1MgJiYgdTNwaHktPmNsa3NbY2xrXTsgY2xrKyspIHsKKwkJcmV0ID0g
Y2xrX3ByZXBhcmVfZW5hYmxlKHUzcGh5LT5jbGtzW2Nsa10pOworCQlpZiAocmV0KQorCQkJZ290
byBlcnJfZGlzYWJsZV9jbGtzOworCX0KKwlyZXR1cm4gMDsKKworZXJyX2Rpc2FibGVfY2xrczoK
Kwl3aGlsZSAoLS1jbGsgPj0gMCkKKwkJY2xrX2Rpc2FibGVfdW5wcmVwYXJlKHUzcGh5LT5jbGtz
W2Nsa10pOworCXJldHVybiByZXQ7Cit9CisKK3N0YXRpYyB2b2lkIHJvY2tjaGlwX3UzcGh5X2Ns
a19kaXNhYmxlKHN0cnVjdCByb2NrY2hpcF91M3BoeSAqdTNwaHkpCit7CisJaW50IGNsazsKKwor
CWZvciAoY2xrID0gVTNQSFlfTUFYX0NMS1MgLSAxOyBjbGsgPj0gMDsgY2xrLS0pCisJCWlmICh1
M3BoeS0+Y2xrc1tjbGtdKQorCQkJY2xrX2Rpc2FibGVfdW5wcmVwYXJlKHUzcGh5LT5jbGtzW2Ns
a10pOworfQorCitzdGF0aWMgaW50IHJvY2tjaGlwX3UzcGh5X2luaXQoc3RydWN0IHBoeSAqcGh5
KQoreworCXJldHVybiAwOworfQorCitzdGF0aWMgaW50IHJvY2tjaGlwX3UzcGh5X2V4aXQoc3Ry
dWN0IHBoeSAqcGh5KQoreworCXJldHVybiAwOworfQorCitzdGF0aWMgaW50IHJvY2tjaGlwX3Uz
cGh5X3Bvd2VyX29uKHN0cnVjdCBwaHkgKnBoeSkKK3sKKwlzdHJ1Y3Qgcm9ja2NoaXBfdTNwaHlf
cG9ydCAqdTNwaHlfcG9ydCA9IHBoeV9nZXRfZHJ2ZGF0YShwaHkpOworCXN0cnVjdCByb2NrY2hp
cF91M3BoeSAqdTNwaHkgPSBkZXZfZ2V0X2RydmRhdGEocGh5LT5kZXYucGFyZW50KTsKKwlpbnQg
cmV0OworCisJZGV2X2luZm8oJnUzcGh5X3BvcnQtPnBoeS0+ZGV2LCAidTNwaHkgJXMgcG93ZXIg
b25cbiIsCisJCSAodTNwaHlfcG9ydC0+dHlwZSA9PSBVM1BIWV9UWVBFX1VUTUkpID8gInUyIiA6
ICJ1MyIpOworCisJaWYgKCF1M3BoeV9wb3J0LT5zdXNwZW5kZWQpCisJCXJldHVybiAwOworCisJ
cmV0ID0gcm9ja2NoaXBfdTNwaHlfY2xrX2VuYWJsZSh1M3BoeSk7CisJaWYgKHJldCkKKwkJcmV0
dXJuIHJldDsKKworCWlmICh1M3BoeV9wb3J0LT50eXBlID09IFUzUEhZX1RZUEVfVVRNSSkgewor
CQlwYXJhbV93cml0ZSh1M3BoeS0+dTNwaHlfZ3JmLAorCQkJICAgICZ1M3BoeS0+Y2Zncy0+Z3Jm
Y2ZnLnVtX3N1c3BlbmQsIGZhbHNlKTsKKwl9IGVsc2UgeworCQkvKiBjdXJyZW50IGluIHAyID8g
Ki8KKwkJaWYgKHBhcmFtX2V4cGVkKHUzcGh5LT51M3BoeV9ncmYsCisJCQkJJnUzcGh5LT5jZmdz
LT5ncmZjZmcucHBfcHdyX3N0LCBQSVBFX1BXUl9QMikpCisJCQlnb3RvIGRvbmU7CisKKwkJaWYg
KHUzcGh5LT5jZmdzLT5waHlfcGlwZV9wb3dlcikgeworCQkJZGV2X2RiZyh1M3BoeS0+ZGV2LCAi
ZG8gcGlwZSBwb3dlciB1cFxuIik7CisJCQl1M3BoeS0+Y2Zncy0+cGh5X3BpcGVfcG93ZXIodTNw
aHksIHUzcGh5X3BvcnQsIHRydWUpOworCQl9CisKKwkJLyogZXhpdCB0byBwMCAqLworCQlwYXJh
bV93cml0ZSh1M3BoeS0+dTNwaHlfZ3JmLAorCQkJICAgICZ1M3BoeS0+Y2Zncy0+Z3JmY2ZnLnBw
X3B3cl9lbltQSVBFX1BXUl9QMF0sIHRydWUpOworCQl1c2xlZXBfcmFuZ2UoOTAsIDEwMCk7CisK
KwkJLyogZW50ZXIgdG8gcDIgZnJvbSBwMCAqLworCQlwYXJhbV93cml0ZSh1M3BoeS0+dTNwaHlf
Z3JmLAorCQkJICAgICZ1M3BoeS0+Y2Zncy0+Z3JmY2ZnLnBwX3B3cl9lbltQSVBFX1BXUl9QMl0s
CisJCQkgICAgZmFsc2UpOworCQl1ZGVsYXkoMyk7CisJfQorCitkb25lOgorCXUzcGh5X3BvcnQt
PnN1c3BlbmRlZCA9IGZhbHNlOworCXJldHVybiAwOworfQorCitzdGF0aWMgaW50IHJvY2tjaGlw
X3UzcGh5X3Bvd2VyX29mZihzdHJ1Y3QgcGh5ICpwaHkpCit7CisJc3RydWN0IHJvY2tjaGlwX3Uz
cGh5X3BvcnQgKnUzcGh5X3BvcnQgPSBwaHlfZ2V0X2RydmRhdGEocGh5KTsKKwlzdHJ1Y3Qgcm9j
a2NoaXBfdTNwaHkgKnUzcGh5ID0gZGV2X2dldF9kcnZkYXRhKHBoeS0+ZGV2LnBhcmVudCk7CisK
KwlkZXZfaW5mbygmdTNwaHlfcG9ydC0+cGh5LT5kZXYsICJ1M3BoeSAlcyBwb3dlciBvZmZcbiIs
CisJCSAodTNwaHlfcG9ydC0+dHlwZSA9PSBVM1BIWV9UWVBFX1VUTUkpID8gInUyIiA6ICJ1MyIp
OworCisJaWYgKHUzcGh5X3BvcnQtPnN1c3BlbmRlZCkKKwkJcmV0dXJuIDA7CisKKwlpZiAodTNw
aHlfcG9ydC0+dHlwZSA9PSBVM1BIWV9UWVBFX1VUTUkpIHsKKwkJcGFyYW1fd3JpdGUodTNwaHkt
PnUzcGh5X2dyZiwKKwkJCSAgICAmdTNwaHktPmNmZ3MtPmdyZmNmZy51bV9zdXNwZW5kLCB0cnVl
KTsKKwl9IGVsc2UgeworCQkvKiBjdXJyZW50IGluIHAzID8gKi8KKwkJaWYgKHBhcmFtX2V4cGVk
KHUzcGh5LT51M3BoeV9ncmYsCisJCQkJJnUzcGh5LT5jZmdzLT5ncmZjZmcucHBfcHdyX3N0LCBQ
SVBFX1BXUl9QMykpCisJCQlnb3RvIGRvbmU7CisKKwkJLyogZXhpdCB0byBwMCAqLworCQlwYXJh
bV93cml0ZSh1M3BoeS0+dTNwaHlfZ3JmLAorCQkJICAgICZ1M3BoeS0+Y2Zncy0+Z3JmY2ZnLnBw
X3B3cl9lbltQSVBFX1BXUl9QMF0sIHRydWUpOworCQl1ZGVsYXkoMik7CisKKwkJLyogZW50ZXIg
dG8gcDMgZnJvbSBwMCAqLworCQlwYXJhbV93cml0ZSh1M3BoeS0+dTNwaHlfZ3JmLAorCQkJICAg
ICZ1M3BoeS0+Y2Zncy0+Z3JmY2ZnLnBwX3B3cl9lbltQSVBFX1BXUl9QM10sIHRydWUpOworCQl1
ZGVsYXkoNik7CisKKwkJaWYgKHUzcGh5LT5jZmdzLT5waHlfcGlwZV9wb3dlcikgeworCQkJZGV2
X2RiZyh1M3BoeS0+ZGV2LCAiZG8gcGlwZSBwb3dlciBkb3duXG4iKTsKKwkJCXUzcGh5LT5jZmdz
LT5waHlfcGlwZV9wb3dlcih1M3BoeSwgdTNwaHlfcG9ydCwgZmFsc2UpOworCQl9CisJfQorCitk
b25lOgorCXJvY2tjaGlwX3UzcGh5X2Nsa19kaXNhYmxlKHUzcGh5KTsKKwl1M3BoeV9wb3J0LT5z
dXNwZW5kZWQgPSB0cnVlOworCXJldHVybiAwOworfQorCitzdGF0aWMgaW50IHJvY2tjaGlwX3Uz
cGh5X2NhbGlicmF0ZShzdHJ1Y3QgcGh5ICpwaHkpCit7CisJc3RydWN0IHJvY2tjaGlwX3UzcGh5
X3BvcnQgKnUzcGh5X3BvcnQgPSBwaHlfZ2V0X2RydmRhdGEocGh5KTsKKwlzdHJ1Y3Qgcm9ja2No
aXBfdTNwaHkgKnUzcGh5ID0gZGV2X2dldF9kcnZkYXRhKHBoeS0+ZGV2LnBhcmVudCk7CisJaW50
IHJldDsKKworCWlmICh1M3BoeS0+Y2Zncy0+cGh5X2NhbGlicmF0ZSkgeworCQkvKgorCQkgKiBX
aGVuIGRvIFVTQjMgY29tcGxpYW5jZSB0ZXN0LCB3ZSBtYXkgY29ubmVjdCB0aGUgb3NjaWxsb3Nj
b3BlCisJCSAqIGZyb250IHBhbmVsIEF1eCBPdXQgdG8gdGhlIERVVCBTU1JYKywgdGhlIEF1eCBP
dXQgb2YgdGhlCisJCSAqIG9zY2lsbG9zY29wZSBvdXRwdXRzIGEgbmVnYXRpdmUgcHVsc2Ugd2hv
c2Ugd2lkdGggaXMgYmV0d2VlbgorCQkgKiAzMDAtIDQwMCBucyB3aGljaCBtYXkgdHJpZ2dlciBz
b21lIERVVHMgdG8gY2hhbmdlIHRoZSBDUCB0ZXN0CisJCSAqIHBhdHRlcm4uCisJCSAqCisJCSAq
IFRoZSBJbm5vIFVTQjMgUEhZIGRpc2FibGUgdGhlIGZ1bmN0aW9uIHRvIGRldGVjdCB0aGUgbmVn
YXRpdmUKKwkJICogcHVsc2UgaW4gU1NSWCsgYnkgZGVmYXVsdCwgc28gd2UgbmVlZCB0byBlbmFi
bGUgdGhlIGZ1bmN0aW9uCisJCSAqIHRvIHRvZ2dsZSB0aGUgQ1AgdGVzdCBwYXR0ZXJuIGJlZm9y
ZSBkbyBVU0IzIGNvbXBsaWFuY2UgdGVzdC4KKwkJICovCisJCWRldl9kYmcodTNwaHktPmRldiwg
InByZXBhcmUgZm9yIHUzcGh5IGNvbXBsaWFuY2UgdGVzdFxuIik7CisJCXJldCA9IHUzcGh5LT5j
ZmdzLT5waHlfY2FsaWJyYXRlKHUzcGh5LCB1M3BoeV9wb3J0KTsKKwkJaWYgKHJldCkKKwkJCXJl
dHVybiByZXQ7CisJfQorCisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBfX21heWJlX3VudXNlZAor
c3RydWN0IHBoeSAqcm9ja2NoaXBfdTNwaHlfeGxhdGUoc3RydWN0IGRldmljZSAqZGV2LAorCQkJ
CSBzdHJ1Y3Qgb2ZfcGhhbmRsZV9hcmdzICphcmdzKQoreworCXN0cnVjdCByb2NrY2hpcF91M3Bo
eSAqdTNwaHkgPSBkZXZfZ2V0X2RydmRhdGEoZGV2KTsKKwlzdHJ1Y3Qgcm9ja2NoaXBfdTNwaHlf
cG9ydCAqdTNwaHlfcG9ydCA9IE5VTEw7CisJc3RydWN0IGRldmljZV9ub2RlICpwaHlfbnAgPSBh
cmdzLT5ucDsKKwlpbnQgaW5kZXg7CisKKwlpZiAoYXJncy0+YXJnc19jb3VudCAhPSAxKSB7CisJ
CWRldl9lcnIoZGV2LCAiaW52YWxpZCBudW1iZXIgb2YgY2VsbHMgaW4gJ3BoeScgcHJvcGVydHlc
biIpOworCQlyZXR1cm4gRVJSX1BUUigtRUlOVkFMKTsKKwl9CisKKwlmb3IgKGluZGV4ID0gMDsg
aW5kZXggPCBVM1BIWV9QT1JUX05VTTsgaW5kZXgrKykgeworCQlpZiAocGh5X25wID09IHUzcGh5
LT5wb3J0c1tpbmRleF0ucGh5LT5kZXYub2Zfbm9kZSkgeworCQkJdTNwaHlfcG9ydCA9ICZ1M3Bo
eS0+cG9ydHNbaW5kZXhdOworCQkJYnJlYWs7CisJCX0KKwl9CisKKwlpZiAoIXUzcGh5X3BvcnQp
IHsKKwkJZGV2X2VycihkZXYsICJmYWlsZWQgdG8gZmluZCBhcHByb3ByaWF0ZSBwaHlcbiIpOwor
CQlyZXR1cm4gRVJSX1BUUigtRUlOVkFMKTsKKwl9CisKKwlyZXR1cm4gdTNwaHlfcG9ydC0+cGh5
OworfQorCitzdGF0aWMgc3RydWN0IHBoeV9vcHMgcm9ja2NoaXBfdTNwaHlfb3BzID0geworCS5p
bml0CQk9IHJvY2tjaGlwX3UzcGh5X2luaXQsCisJLmV4aXQJCT0gcm9ja2NoaXBfdTNwaHlfZXhp
dCwKKwkucG93ZXJfb24JPSByb2NrY2hpcF91M3BoeV9wb3dlcl9vbiwKKwkucG93ZXJfb2ZmCT0g
cm9ja2NoaXBfdTNwaHlfcG93ZXJfb2ZmLAorCS5jYWxpYnJhdGUJPSByb2NrY2hpcF91M3BoeV9j
YWxpYnJhdGUsCisJLm93bmVyCQk9IFRISVNfTU9EVUxFLAorfTsKKworLyoKKyAqIFRoZSBmdW5j
dGlvbiBtYW5hZ2UgaG9zdC1waHkgcG9ydCBzdGF0ZSBhbmQgc3VzcGVuZC9yZXN1bWUgcGh5IHBv
cnQKKyAqIHRvIHNhdmUgcG93ZXIgYXV0b21hdGljYWxseS4KKyAqCisgKiB3ZSByZWx5IG9uIHV0
bWlfbGluZXN0YXRlIGFuZCB1dG1pX2hvc3RkaXNjb25uZWN0IHRvIGlkZW50aWZ5IHdoZXRoZXIK
KyAqIGRldmljZXMgaXMgZGlzY29ubmVjdCBvciBub3QuIEJlc2lkZXMsIHdlIGRvIG5vdCBuZWVk
IGNhcmUgaXQgaXMgRlMvTFMKKyAqIGRpc2Nvbm5lY3RlZCBvciBIUyBkaXNjb25uZWN0ZWQsIGFj
dHVhbGx5LCB3ZSBqdXN0IG9ubHkgbmVlZCBnZXQgdGhlCisgKiBkZXZpY2UgaXMgZGlzY29ubmVj
dGVkIGF0IGxhc3QgdGhyb3VnaCByZWFybSB0aGUgZGVsYXllZCB3b3JrLAorICogdG8gc3VzcGVu
ZCB0aGUgcGh5IHBvcnQgaW4gX1BIWV9TVEFURV9ESVNDT05ORUNUXyBjYXNlLgorICovCitzdGF0
aWMgdm9pZCByb2NrY2hpcF91M3BoeV91bV9zbV93b3JrKHN0cnVjdCB3b3JrX3N0cnVjdCAqd29y
aykKK3sKKwlzdHJ1Y3Qgcm9ja2NoaXBfdTNwaHlfcG9ydCAqdTNwaHlfcG9ydCA9CisJCWNvbnRh
aW5lcl9vZih3b3JrLCBzdHJ1Y3Qgcm9ja2NoaXBfdTNwaHlfcG9ydCwgdW1fc21fd29yay53b3Jr
KTsKKwlzdHJ1Y3Qgcm9ja2NoaXBfdTNwaHkgKnUzcGh5ID0KKwkJZGV2X2dldF9kcnZkYXRhKHUz
cGh5X3BvcnQtPnBoeS0+ZGV2LnBhcmVudCk7CisJdW5zaWduZWQgaW50IHNoID0gdTNwaHktPmNm
Z3MtPmdyZmNmZy51bV9oc3RkY3QuYml0ZW5kIC0KKwkJCXUzcGh5LT5jZmdzLT5ncmZjZmcudW1f
aHN0ZGN0LmJpdHN0YXJ0ICsgMTsKKwl1bnNpZ25lZCBpbnQgdWwsIHVoZCwgc3RhdGU7CisJdW5z
aWduZWQgaW50IHVsX21hc2ssIHVoZF9tYXNrOworCWludCByZXQ7CisKKwltdXRleF9sb2NrKCZ1
M3BoeV9wb3J0LT5tdXRleCk7CisKKwlyZXQgPSByZWdtYXBfcmVhZCh1M3BoeS0+dTNwaHlfZ3Jm
LAorCQkJICB1M3BoeS0+Y2Zncy0+Z3JmY2ZnLnVtX2xzLm9mZnNldCwgJnVsKTsKKwlpZiAocmV0
IDwgMCkKKwkJZ290byBuZXh0X3NjaGVkdWxlOworCisJcmV0ID0gcmVnbWFwX3JlYWQodTNwaHkt
PnUzcGh5X2dyZiwKKwkJCSAgdTNwaHktPmNmZ3MtPmdyZmNmZy51bV9oc3RkY3Qub2Zmc2V0LCAm
dWhkKTsKKwlpZiAocmV0IDwgMCkKKwkJZ290byBuZXh0X3NjaGVkdWxlOworCisJdWhkX21hc2sg
PSBHRU5NQVNLKHUzcGh5LT5jZmdzLT5ncmZjZmcudW1faHN0ZGN0LmJpdGVuZCwKKwkJCSAgIHUz
cGh5LT5jZmdzLT5ncmZjZmcudW1faHN0ZGN0LmJpdHN0YXJ0KTsKKwl1bF9tYXNrID0gR0VOTUFT
Syh1M3BoeS0+Y2Zncy0+Z3JmY2ZnLnVtX2xzLmJpdGVuZCwKKwkJCSAgdTNwaHktPmNmZ3MtPmdy
ZmNmZy51bV9scy5iaXRzdGFydCk7CisKKwkvKiBzdGl0Y2ggb24gdW1fbHMgYW5kIHVtX2hzdGRj
dCBhcyBwaHkgc3RhdGUgKi8KKwlzdGF0ZSA9ICgodWhkICYgdWhkX21hc2spID4+IHUzcGh5LT5j
ZmdzLT5ncmZjZmcudW1faHN0ZGN0LmJpdHN0YXJ0KSB8CisJCSgoKHVsICYgdWxfbWFzaykgPj4g
dTNwaHktPmNmZ3MtPmdyZmNmZy51bV9scy5iaXRzdGFydCkgPDwgc2gpOworCisJc3dpdGNoIChz
dGF0ZSkgeworCWNhc2UgUEhZX1VUTUlfSFNfT05MSU5FOgorCQlkZXZfZGJnKCZ1M3BoeV9wb3J0
LT5waHktPmRldiwgIkhTIG9ubGluZVxuIik7CisJCWJyZWFrOworCWNhc2UgUEhZX1VUTUlfRlNf
TFNfT05MSU5FOgorCQkvKgorCQkgKiBGb3IgRlMvTFMgZGV2aWNlLCB0aGUgb25saW5lIHN0YXRl
IHNoYXJlIHdpdGggY29ubmVjdCBzdGF0ZQorCQkgKiBmcm9tIHVtX2xzIGFuZCB1bV9oc3RkY3Qg
cmVnaXN0ZXIsIHNvIHdlIGRpc3Rpbmd1aXNoCisJCSAqIHRoZW0gdmlhIHN1c3BlbmRlZCBmbGFn
LgorCQkgKgorCQkgKiBQbHVzLCB0aGVyZSBhcmUgdHdvIGNhc2VzLCBvbmUgaXMgRC0gTGluZSBw
dWxsLXVwLCBhbmQgRCsKKwkJICogbGluZSBwdWxsLWRvd24sIHRoZSBzdGF0ZSBpcyA0OyBhbm90
aGVyIGlzIEQrIGxpbmUgcHVsbC11cCwKKwkJICogYW5kIEQtIGxpbmUgcHVsbC1kb3duLCB0aGUg
c3RhdGUgaXMgMi4KKwkJICovCisJCWlmICghdTNwaHlfcG9ydC0+c3VzcGVuZGVkKSB7CisJCQkv
KiBELSBsaW5lIHB1bGwtdXAsIEQrIGxpbmUgcHVsbC1kb3duICovCisJCQlkZXZfZGJnKCZ1M3Bo
eV9wb3J0LT5waHktPmRldiwgIkZTL0xTIG9ubGluZVxuIik7CisJCQlicmVhazsKKwkJfQorCQkv
KiBmYWxsIHRocm91Z2ggKi8KKwljYXNlIFBIWV9VVE1JX0NPTk5FQ1Q6CisJCWlmICh1M3BoeV9w
b3J0LT5zdXNwZW5kZWQpIHsKKwkJCWRldl9kYmcoJnUzcGh5X3BvcnQtPnBoeS0+ZGV2LCAiQ29u
bmVjdGVkXG4iKTsKKwkJCXJvY2tjaGlwX3UzcGh5X3Bvd2VyX29uKHUzcGh5X3BvcnQtPnBoeSk7
CisJCQl1M3BoeV9wb3J0LT5zdXNwZW5kZWQgPSBmYWxzZTsKKwkJfSBlbHNlIHsKKwkJCS8qIEQr
IGxpbmUgcHVsbC11cCwgRC0gbGluZSBwdWxsLWRvd24gKi8KKwkJCWRldl9kYmcoJnUzcGh5X3Bv
cnQtPnBoeS0+ZGV2LCAiRlMvTFMgb25saW5lXG4iKTsKKwkJfQorCQlicmVhazsKKwljYXNlIFBI
WV9VVE1JX0RJU0NPTk5FQ1Q6CisJCWlmICghdTNwaHlfcG9ydC0+c3VzcGVuZGVkKSB7CisJCQlk
ZXZfZGJnKCZ1M3BoeV9wb3J0LT5waHktPmRldiwgIkRpc2Nvbm5lY3RlZFxuIik7CisJCQlyb2Nr
Y2hpcF91M3BoeV9wb3dlcl9vZmYodTNwaHlfcG9ydC0+cGh5KTsKKwkJCXUzcGh5X3BvcnQtPnN1
c3BlbmRlZCA9IHRydWU7CisJCX0KKworCQkvKgorCQkgKiBhY3RpdmF0ZSB0aGUgbGluZXN0YXRl
IGRldGVjdGlvbiB0byBnZXQgdGhlIG5leHQgZGV2aWNlCisJCSAqIHBsdWctaW4gaXJxLgorCQkg
Ki8KKwkJcGFyYW1fd3JpdGUodTNwaHktPnUzcGh5X2dyZiwKKwkJCSAgICAmdTNwaHktPmNmZ3Mt
PmdyZmNmZy5sc19kZXRfc3QsIHRydWUpOworCQlwYXJhbV93cml0ZSh1M3BoeS0+dTNwaHlfZ3Jm
LAorCQkJICAgICZ1M3BoeS0+Y2Zncy0+Z3JmY2ZnLmxzX2RldF9lbiwgdHJ1ZSk7CisKKwkJLyoK
KwkJICogd2UgZG9uJ3QgbmVlZCB0byByZWFybSB0aGUgZGVsYXllZCB3b3JrIHdoZW4gdGhlIHBo
eSBwb3J0CisJCSAqIGlzIHN1c3BlbmRlZC4KKwkJICovCisJCW11dGV4X3VubG9jaygmdTNwaHlf
cG9ydC0+bXV0ZXgpOworCQlyZXR1cm47CisJZGVmYXVsdDoKKwkJZGV2X2RiZygmdTNwaHlfcG9y
dC0+cGh5LT5kZXYsICJ1bmtub3duIHBoeSBzdGF0ZVxuIik7CisJCWJyZWFrOworCX0KKworbmV4
dF9zY2hlZHVsZToKKwltdXRleF91bmxvY2soJnUzcGh5X3BvcnQtPm11dGV4KTsKKwlzY2hlZHVs
ZV9kZWxheWVkX3dvcmsoJnUzcGh5X3BvcnQtPnVtX3NtX3dvcmssIFNDSEVEVUxFX0RFTEFZKTsK
K30KKworc3RhdGljIGlycXJldHVybl90IHJvY2tjaGlwX3UzcGh5X3VtX2xzX2lycShpbnQgaXJx
LCB2b2lkICpkYXRhKQoreworCXN0cnVjdCByb2NrY2hpcF91M3BoeV9wb3J0ICp1M3BoeV9wb3J0
ID0gZGF0YTsKKwlzdHJ1Y3Qgcm9ja2NoaXBfdTNwaHkgKnUzcGh5ID0KKwkJZGV2X2dldF9kcnZk
YXRhKHUzcGh5X3BvcnQtPnBoeS0+ZGV2LnBhcmVudCk7CisKKwlpZiAoIXBhcmFtX2V4cGVkKHUz
cGh5LT51M3BoeV9ncmYsCisJCQkgJnUzcGh5LT5jZmdzLT5ncmZjZmcubHNfZGV0X3N0LAorCQkJ
IHUzcGh5LT5jZmdzLT5ncmZjZmcubHNfZGV0X3N0LmR2YWx1ZSkpCisJCXJldHVybiBJUlFfTk9O
RTsKKworCWRldl9kYmcodTNwaHktPmRldiwgInV0bWkgbGluZXN0YXRlIGludGVycnVwdFxuIik7
CisJbXV0ZXhfbG9jaygmdTNwaHlfcG9ydC0+bXV0ZXgpOworCisJLyogZGlzYWJsZSBsaW5lc3Rh
dGUgZGV0ZWN0IGlycSBhbmQgY2xlYXIgaXRzIHN0YXR1cyAqLworCXBhcmFtX3dyaXRlKHUzcGh5
LT51M3BoeV9ncmYsICZ1M3BoeS0+Y2Zncy0+Z3JmY2ZnLmxzX2RldF9lbiwgZmFsc2UpOworCXBh
cmFtX3dyaXRlKHUzcGh5LT51M3BoeV9ncmYsICZ1M3BoeS0+Y2Zncy0+Z3JmY2ZnLmxzX2RldF9z
dCwgdHJ1ZSk7CisKKwltdXRleF91bmxvY2soJnUzcGh5X3BvcnQtPm11dGV4KTsKKworCS8qCisJ
ICogSW4gdGhpcyBjYXNlIGZvciBob3N0IHBoeSwgYSBuZXcgZGV2aWNlIGlzIHBsdWdnZWQgaW4s
IG1lYW53aGlsZSwKKwkgKiBpZiB0aGUgcGh5IHBvcnQgaXMgc3VzcGVuZGVkLCB3ZSBuZWVkIHJl
YXJtIHRoZSB3b3JrIHRvIHJlc3VtZSBpdAorCSAqIGFuZCBtYW5nZSBpdHMgc3RhdGVzOyBvdGhl
cndpc2UsIHdlIGp1c3QgcmV0dXJuIGlycSBoYW5kbGVkLgorCSAqLworCWlmICh1M3BoeV9wb3J0
LT5zdXNwZW5kZWQpIHsKKwkJZGV2X2RiZyh1M3BoeS0+ZGV2LCAic2NoZWR1bGUgdXRtaSBzbSB3
b3JrXG4iKTsKKwkJcm9ja2NoaXBfdTNwaHlfdW1fc21fd29yaygmdTNwaHlfcG9ydC0+dW1fc21f
d29yay53b3JrKTsKKwl9CisKKwlyZXR1cm4gSVJRX0hBTkRMRUQ7Cit9CisKK3N0YXRpYyBpbnQg
cm9ja2NoaXBfdTNwaHlfcGFyc2VfZHQoc3RydWN0IHJvY2tjaGlwX3UzcGh5ICp1M3BoeSwKKwkJ
CQkgICBzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpwZGV2KQorCit7CisJc3RydWN0IGRldmljZSAq
ZGV2ID0gJnBkZXYtPmRldjsKKwlzdHJ1Y3QgZGV2aWNlX25vZGUgKm5wID0gZGV2LT5vZl9ub2Rl
OworCWludCByZXQsIGksIGNsazsKKworCXUzcGh5LT51bV9sc19pcnEgPSBwbGF0Zm9ybV9nZXRf
aXJxX2J5bmFtZShwZGV2LCAibGluZXN0YXRlIik7CisJaWYgKHUzcGh5LT51bV9sc19pcnEgPCAw
KSB7CisJCWRldl9lcnIoZGV2LCAiZ2V0IHV0bWkgbGluZXN0YXRlIGlycSBmYWlsZWRcbiIpOwor
CQlyZXR1cm4gLUVOWElPOworCX0KKworCXUzcGh5LT52YnVzX2Rydl9ncGlvID0gZGV2bV9ncGlv
ZF9nZXRfb3B0aW9uYWwoZGV2LCAidmJ1cy1kcnYiLAorCQkJCQkJICAgICAgIEdQSU9EX09VVF9I
SUdIKTsKKworCWlmICghdTNwaHktPnZidXNfZHJ2X2dwaW8pIHsKKwkJZGV2X3dhcm4oJnBkZXYt
PmRldiwgInZidXNfZHJ2IGlzIG5vdCBhc3NpZ25lZFxuIik7CisJfSBlbHNlIGlmIChJU19FUlIo
dTNwaHktPnZidXNfZHJ2X2dwaW8pKSB7CisJCWRldl9lcnIoJnBkZXYtPmRldiwgImZhaWxlZCB0
byBnZXQgdmJ1c19kcnZcbiIpOworCQlyZXR1cm4gUFRSX0VSUih1M3BoeS0+dmJ1c19kcnZfZ3Bp
byk7CisJfQorCisJZm9yIChjbGsgPSAwOyBjbGsgPCBVM1BIWV9NQVhfQ0xLUzsgY2xrKyspIHsK
KwkJdTNwaHktPmNsa3NbY2xrXSA9IG9mX2Nsa19nZXQobnAsIGNsayk7CisJCWlmIChJU19FUlIo
dTNwaHktPmNsa3NbY2xrXSkpIHsKKwkJCXJldCA9IFBUUl9FUlIodTNwaHktPmNsa3NbY2xrXSk7
CisJCQlpZiAocmV0ID09IC1FUFJPQkVfREVGRVIpCisJCQkJZ290byBlcnJfcHV0X2Nsa3M7CisJ
CQl1M3BoeS0+Y2xrc1tjbGtdID0gTlVMTDsKKwkJCWJyZWFrOworCQl9CisJfQorCisJZm9yIChp
ID0gMDsgaSA8IFUzUEhZX1JFU0VUX01BWDsgaSsrKSB7CisJCXUzcGh5LT5yc3RzW2ldID0gZGV2
bV9yZXNldF9jb250cm9sX2dldChkZXYsIGdldF9yZXN0X25hbWUoaSkpOworCQlpZiAoSVNfRVJS
KHUzcGh5LT5yc3RzW2ldKSkgeworCQkJZGV2X2luZm8oZGV2LCAibm8gJXMgcmVzZXQgY29udHJv
bCBzcGVjaWZpZWRcbiIsCisJCQkJIGdldF9yZXN0X25hbWUoaSkpOworCQkJdTNwaHktPnJzdHNb
aV0gPSBOVUxMOworCQl9CisJfQorCisJcmV0dXJuIDA7CisKK2Vycl9wdXRfY2xrczoKKwl3aGls
ZSAoLS1jbGsgPj0gMCkKKwkJY2xrX3B1dCh1M3BoeS0+Y2xrc1tjbGtdKTsKKwlyZXR1cm4gcmV0
OworfQorCitzdGF0aWMgaW50IHJvY2tjaGlwX3UzcGh5X3BvcnRfaW5pdChzdHJ1Y3Qgcm9ja2No
aXBfdTNwaHkgKnUzcGh5LAorCQkJCSAgICBzdHJ1Y3Qgcm9ja2NoaXBfdTNwaHlfcG9ydCAqdTNw
aHlfcG9ydCwKKwkJCQkgICAgc3RydWN0IGRldmljZV9ub2RlICpjaGlsZF9ucCkKK3sKKwlzdHJ1
Y3QgcmVzb3VyY2UgcmVzOworCXN0cnVjdCBwaHkgKnBoeTsKKwlpbnQgcmV0OworCisJZGV2X2Ri
Zyh1M3BoeS0+ZGV2LCAidTNwaHkgcG9ydCBpbml0aWFsaXplXG4iKTsKKworCW11dGV4X2luaXQo
JnUzcGh5X3BvcnQtPm11dGV4KTsKKwl1M3BoeV9wb3J0LT5zdXNwZW5kZWQgPSB0cnVlOyAvKiBp
bml0aWFsIHN0YXR1cyAqLworCisJcGh5ID0gZGV2bV9waHlfY3JlYXRlKHUzcGh5LT5kZXYsIGNo
aWxkX25wLCAmcm9ja2NoaXBfdTNwaHlfb3BzKTsKKwlpZiAoSVNfRVJSKHBoeSkpIHsKKwkJZGV2
X2Vycih1M3BoeS0+ZGV2LCAiZmFpbGVkIHRvIGNyZWF0ZSBwaHlcbiIpOworCQlyZXR1cm4gUFRS
X0VSUihwaHkpOworCX0KKworCXUzcGh5X3BvcnQtPnBoeSA9IHBoeTsKKworCXJldCA9IG9mX2Fk
ZHJlc3NfdG9fcmVzb3VyY2UoY2hpbGRfbnAsIDAsICZyZXMpOworCWlmIChyZXQpIHsKKwkJZGV2
X2Vycih1M3BoeS0+ZGV2LCAiZmFpbGVkIHRvIGdldCBhZGRyZXNzIHJlc291cmNlKG5wLSVzKVxu
IiwKKwkJCWNoaWxkX25wLT5uYW1lKTsKKwkJcmV0dXJuIHJldDsKKwl9CisKKwl1M3BoeV9wb3J0
LT5iYXNlID0gZGV2bV9pb3JlbWFwX3Jlc291cmNlKCZ1M3BoeV9wb3J0LT5waHktPmRldiwgJnJl
cyk7CisJaWYgKElTX0VSUih1M3BoeV9wb3J0LT5iYXNlKSkgeworCQlkZXZfZXJyKHUzcGh5LT5k
ZXYsICJmYWlsZWQgdG8gcmVtYXAgcGh5IHJlZ3NcbiIpOworCQlyZXR1cm4gUFRSX0VSUih1M3Bo
eV9wb3J0LT5iYXNlKTsKKwl9CisKKwlpZiAoIW9mX25vZGVfY21wKGNoaWxkX25wLT5uYW1lLCAi
cGlwZSIpKSB7CisJCXUzcGh5X3BvcnQtPnR5cGUgPSBVM1BIWV9UWVBFX1BJUEU7CisJCXUzcGh5
X3BvcnQtPnJlZmNsa18yNW1fcXVpcmsgPQorCQkJb2ZfcHJvcGVydHlfcmVhZF9ib29sKGNoaWxk
X25wLAorCQkJCQkgICAgICAicm9ja2NoaXAscmVmY2xrLTI1bS1xdWlyayIpOworCX0gZWxzZSB7
CisJCXUzcGh5X3BvcnQtPnR5cGUgPSBVM1BIWV9UWVBFX1VUTUk7CisJCUlOSVRfREVMQVlFRF9X
T1JLKCZ1M3BoeV9wb3J0LT51bV9zbV93b3JrLAorCQkJCSAgcm9ja2NoaXBfdTNwaHlfdW1fc21f
d29yayk7CisKKwkJcmV0ID0gZGV2bV9yZXF1ZXN0X3RocmVhZGVkX2lycSh1M3BoeS0+ZGV2LCB1
M3BoeS0+dW1fbHNfaXJxLAorCQkJCQkJTlVMTCwgcm9ja2NoaXBfdTNwaHlfdW1fbHNfaXJxLAor
CQkJCQkJSVJRRl9PTkVTSE9ULCAicm9ja2NoaXBfdTNwaHkiLAorCQkJCQkJdTNwaHlfcG9ydCk7
CisJCWlmIChyZXQpIHsKKwkJCWRldl9lcnIodTNwaHktPmRldiwgImZhaWxlZCB0byByZXF1ZXN0
IHV0bWkgbGluZXN0YXRlIGlycSBoYW5kbGVcbiIpOworCQkJcmV0dXJuIHJldDsKKwkJfQorCX0K
KworCWlmICh1M3BoeS0+Y2Zncy0+cGh5X3R1bmluZykgeworCQlkZXZfZGJnKHUzcGh5LT5kZXYs
ICJkbyB1M3BoeSB0dW5pbmdcbiIpOworCQlyZXQgPSB1M3BoeS0+Y2Zncy0+cGh5X3R1bmluZyh1
M3BoeSwgdTNwaHlfcG9ydCwgY2hpbGRfbnApOworCQlpZiAocmV0KQorCQkJcmV0dXJuIHJldDsK
Kwl9CisKKwlwaHlfc2V0X2RydmRhdGEodTNwaHlfcG9ydC0+cGh5LCB1M3BoeV9wb3J0KTsKKwly
ZXR1cm4gMDsKK30KKworc3RhdGljIGludCByb2NrY2hpcF91M3BoeV9vbl9pbml0KHN0cnVjdCB1
c2JfcGh5ICp1c2JfcGh5KQoreworCXN0cnVjdCByb2NrY2hpcF91M3BoeSAqdTNwaHkgPQorCQlj
b250YWluZXJfb2YodXNiX3BoeSwgc3RydWN0IHJvY2tjaGlwX3UzcGh5LCB1c2JfcGh5KTsKKwor
CXJvY2tjaGlwX3UzcGh5X3Jlc3RfZGVhc3NlcnQodTNwaHksIFUzUEhZX1BPUl9SU1QgfCBVM1BI
WV9NQUNfUlNUKTsKKwlyZXR1cm4gMDsKK30KKworc3RhdGljIHZvaWQgcm9ja2NoaXBfdTNwaHlf
b25fc2h1dGRvd24oc3RydWN0IHVzYl9waHkgKnVzYl9waHkpCit7CisJc3RydWN0IHJvY2tjaGlw
X3UzcGh5ICp1M3BoeSA9CisJCWNvbnRhaW5lcl9vZih1c2JfcGh5LCBzdHJ1Y3Qgcm9ja2NoaXBf
dTNwaHksIHVzYl9waHkpOworCWludCByc3Q7CisKKwlmb3IgKHJzdCA9IDA7IHJzdCA8IFUzUEhZ
X1JFU0VUX01BWDsgcnN0KyspCisJCWlmICh1M3BoeS0+cnN0c1tyc3RdICYmIHJzdCAhPSBVVE1J
X0FQQl9SU1ROICYmCisJCSAgICByc3QgIT0gUElQRV9BUEJfUlNUTikKKwkJCXJlc2V0X2NvbnRy
b2xfYXNzZXJ0KHUzcGh5LT5yc3RzW3JzdF0pOworCXVkZWxheSgxKTsKK30KKworc3RhdGljIGlu
dCByb2NrY2hpcF91M3BoeV9vbl9kaXNjb25uZWN0KHN0cnVjdCB1c2JfcGh5ICp1c2JfcGh5LAor
CQkJCQllbnVtIHVzYl9kZXZpY2Vfc3BlZWQgc3BlZWQpCit7CisJc3RydWN0IHJvY2tjaGlwX3Uz
cGh5ICp1M3BoeSA9CisJCWNvbnRhaW5lcl9vZih1c2JfcGh5LCBzdHJ1Y3Qgcm9ja2NoaXBfdTNw
aHksIHVzYl9waHkpOworCisJZGV2X2luZm8odTNwaHktPmRldiwgIiVzIGRldmljZSBoYXMgZGlz
Y29ubmVjdGVkXG4iLAorCQkgKHNwZWVkID09IFVTQl9TUEVFRF9TVVBFUikgPyAiVTMiIDogIlVX
L1UyL1UxLjEvVTEiKTsKKworCWlmIChzcGVlZCA9PSBVU0JfU1BFRURfU1VQRVIpCisJCWF0b21p
Y19ub3RpZmllcl9jYWxsX2NoYWluKCZ1c2JfcGh5LT5ub3RpZmllciwgMCwgTlVMTCk7CisKKwly
ZXR1cm4gMDsKK30KKworc3RhdGljIGludCByb2NrY2hpcF91M3BoeV9wcm9iZShzdHJ1Y3QgcGxh
dGZvcm1fZGV2aWNlICpwZGV2KQoreworCXN0cnVjdCBkZXZpY2UgKmRldiA9ICZwZGV2LT5kZXY7
CisJc3RydWN0IGRldmljZV9ub2RlICpucCA9IGRldi0+b2Zfbm9kZTsKKwlzdHJ1Y3QgZGV2aWNl
X25vZGUgKmNoaWxkX25wOworCXN0cnVjdCBwaHlfcHJvdmlkZXIgKnByb3ZpZGVyOworCXN0cnVj
dCByb2NrY2hpcF91M3BoeSAqdTNwaHk7CisJY29uc3Qgc3RydWN0IHJvY2tjaGlwX3UzcGh5X2Nm
ZyAqcGh5X2NmZ3M7CisJY29uc3Qgc3RydWN0IG9mX2RldmljZV9pZCAqbWF0Y2g7CisJdW5zaWdu
ZWQgaW50IHJlZ1syXTsKKwlpbnQgaW5kZXgsIHJldDsKKworCW1hdGNoID0gb2ZfbWF0Y2hfZGV2
aWNlKGRldi0+ZHJpdmVyLT5vZl9tYXRjaF90YWJsZSwgZGV2KTsKKwlpZiAoIW1hdGNoIHx8ICFt
YXRjaC0+ZGF0YSkgeworCQlkZXZfZXJyKGRldiwgInBoeS1jZmdzIGFyZSBub3QgYXNzaWduZWQh
XG4iKTsKKwkJcmV0dXJuIC1FSU5WQUw7CisJfQorCisJdTNwaHkgPSBkZXZtX2t6YWxsb2MoZGV2
LCBzaXplb2YoKnUzcGh5KSwgR0ZQX0tFUk5FTCk7CisJaWYgKCF1M3BoeSkKKwkJcmV0dXJuIC1F
Tk9NRU07CisKKwl1M3BoeS0+dTNwaHlfZ3JmID0KKwkJc3lzY29uX3JlZ21hcF9sb29rdXBfYnlf
cGhhbmRsZShucCwgInJvY2tjaGlwLHUzcGh5Z3JmIik7CisJaWYgKElTX0VSUih1M3BoeS0+dTNw
aHlfZ3JmKSkKKwkJcmV0dXJuIFBUUl9FUlIodTNwaHktPnUzcGh5X2dyZik7CisKKwl1M3BoeS0+
Z3JmID0KKwkJc3lzY29uX3JlZ21hcF9sb29rdXBfYnlfcGhhbmRsZShucCwgInJvY2tjaGlwLGdy
ZiIpOworCWlmIChJU19FUlIodTNwaHktPmdyZikpIHsKKwkJZGV2X2VycihkZXYsICJNaXNzaW5n
IHJvY2tjaGlwLGdyZiBwcm9wZXJ0eVxuIik7CisJCXJldHVybiBQVFJfRVJSKHUzcGh5LT5ncmYp
OworCX0KKworCWlmIChvZl9wcm9wZXJ0eV9yZWFkX3UzMl9hcnJheShucCwgInJlZyIsIHJlZywg
MikpIHsKKwkJZGV2X2VycihkZXYsICJ0aGUgcmVnIHByb3BlcnR5IGlzIG5vdCBhc3NpZ25lZCBp
biAlcyBub2RlXG4iLAorCQkJbnAtPm5hbWUpOworCQlyZXR1cm4gLUVJTlZBTDsKKwl9CisKKwl1
M3BoeS0+ZGV2ID0gZGV2OworCXBoeV9jZmdzID0gbWF0Y2gtPmRhdGE7CisJcGxhdGZvcm1fc2V0
X2RydmRhdGEocGRldiwgdTNwaHkpOworCisJLyogZmluZCBvdXQgYSBwcm9wZXIgY29uZmlnIHdo
aWNoIGNhbiBiZSBtYXRjaGVkIHdpdGggZHQuICovCisJaW5kZXggPSAwOworCXdoaWxlIChwaHlf
Y2Znc1tpbmRleF0ucmVnKSB7CisJCWlmIChwaHlfY2Znc1tpbmRleF0ucmVnID09IHJlZ1sxXSkg
eworCQkJdTNwaHktPmNmZ3MgPSAmcGh5X2NmZ3NbaW5kZXhdOworCQkJYnJlYWs7CisJCX0KKwor
CQkrK2luZGV4OworCX0KKworCWlmICghdTNwaHktPmNmZ3MpIHsKKwkJZGV2X2VycihkZXYsICJu
byBwaHktY2ZncyBjYW4gYmUgbWF0Y2hlZCB3aXRoICVzIG5vZGVcbiIsCisJCQlucC0+bmFtZSk7
CisJCXJldHVybiAtRUlOVkFMOworCX0KKworCXJldCA9IHJvY2tjaGlwX3UzcGh5X3BhcnNlX2R0
KHUzcGh5LCBwZGV2KTsKKwlpZiAocmV0KSB7CisJCWRldl9lcnIoZGV2LCAicGFyc2UgZHQgZmFp
bGVkLCByZXQoJWQpXG4iLCByZXQpOworCQlyZXR1cm4gcmV0OworCX0KKworCXJldCA9IHJvY2tj
aGlwX3UzcGh5X2Nsa19lbmFibGUodTNwaHkpOworCWlmIChyZXQpIHsKKwkJZGV2X2VycihkZXYs
ICJjbGsgZW5hYmxlIGZhaWxlZCwgcmV0KCVkKVxuIiwgcmV0KTsKKwkJcmV0dXJuIHJldDsKKwl9
CisKKwlyb2NrY2hpcF91M3BoeV9yZXN0X2Fzc2VydCh1M3BoeSk7CisJcm9ja2NoaXBfdTNwaHlf
cmVzdF9kZWFzc2VydCh1M3BoeSwgVTNQSFlfQVBCX1JTVCB8IFUzUEhZX1BPUl9SU1QpOworCisJ
aW5kZXggPSAwOworCWZvcl9lYWNoX2F2YWlsYWJsZV9jaGlsZF9vZl9ub2RlKG5wLCBjaGlsZF9u
cCkgeworCQlzdHJ1Y3Qgcm9ja2NoaXBfdTNwaHlfcG9ydCAqdTNwaHlfcG9ydCA9ICZ1M3BoeS0+
cG9ydHNbaW5kZXhdOworCisJCXUzcGh5X3BvcnQtPmluZGV4ID0gaW5kZXg7CisJCXJldCA9IHJv
Y2tjaGlwX3UzcGh5X3BvcnRfaW5pdCh1M3BoeSwgdTNwaHlfcG9ydCwgY2hpbGRfbnApOworCQlp
ZiAocmV0KSB7CisJCQlkZXZfZXJyKGRldiwgInUzcGh5IHBvcnQgaW5pdCBmYWlsZWQscmV0KCVk
KVxuIiwgcmV0KTsKKwkJCWdvdG8gcHV0X2NoaWxkOworCQl9CisKKwkJLyogdG8gcHJldmVudCBv
dXQgb2YgYm91bmRhcnkgKi8KKwkJaWYgKCsraW5kZXggPj0gVTNQSFlfUE9SVF9OVU0pCisJCQli
cmVhazsKKwl9CisKKwlwcm92aWRlciA9IGRldm1fb2ZfcGh5X3Byb3ZpZGVyX3JlZ2lzdGVyKGRl
diwgb2ZfcGh5X3NpbXBsZV94bGF0ZSk7CisJaWYgKElTX0VSUl9PUl9OVUxMKHByb3ZpZGVyKSkK
KwkJZ290byBwdXRfY2hpbGQ7CisKKwlyb2NrY2hpcF91M3BoeV9yZXN0X2RlYXNzZXJ0KHUzcGh5
LCBVM1BIWV9NQUNfUlNUKTsKKwlyb2NrY2hpcF91M3BoeV9jbGtfZGlzYWJsZSh1M3BoeSk7CisK
Kwl1M3BoeS0+dXNiX3BoeS5kZXYgPSBkZXY7CisJdTNwaHktPnVzYl9waHkuaW5pdCA9IHJvY2tj
aGlwX3UzcGh5X29uX2luaXQ7CisJdTNwaHktPnVzYl9waHkuc2h1dGRvd24gPSByb2NrY2hpcF91
M3BoeV9vbl9zaHV0ZG93bjsKKwl1M3BoeS0+dXNiX3BoeS5ub3RpZnlfZGlzY29ubmVjdCA9IHJv
Y2tjaGlwX3UzcGh5X29uX2Rpc2Nvbm5lY3Q7CisJdXNiX2FkZF9waHkoJnUzcGh5LT51c2JfcGh5
LCBVU0JfUEhZX1RZUEVfVVNCMyk7CisJQVRPTUlDX0lOSVRfTk9USUZJRVJfSEVBRCgmdTNwaHkt
PnVzYl9waHkubm90aWZpZXIpOworCisJcm9ja2NoaXBfdTNwaHlfZGVidWdmc19pbml0KHUzcGh5
KTsKKworCWRldl9pbmZvKGRldiwgIlJvY2tjaGlwIHUzcGh5IGluaXRpYWxpemVkIHN1Y2Nlc3Nm
dWxseVxuIik7CisJcmV0dXJuIDA7CisKK3B1dF9jaGlsZDoKKwlvZl9ub2RlX3B1dChjaGlsZF9u
cCk7CisJcmV0dXJuIHJldDsKK30KKworc3RhdGljIGludCByazMzMjhfdTNwaHlfcGlwZV9wb3dl
cihzdHJ1Y3Qgcm9ja2NoaXBfdTNwaHkgKnUzcGh5LAorCQkJCSAgIHN0cnVjdCByb2NrY2hpcF91
M3BoeV9wb3J0ICp1M3BoeV9wb3J0LAorCQkJCSAgIGJvb2wgb24pCit7CisJdW5zaWduZWQgaW50
IHJlZzsKKworCWlmIChvbikgeworCQlyZWcgPSByZWFkbCh1M3BoeV9wb3J0LT5iYXNlICsgMHgx
YTgpOworCQlyZWcgJj0gfkJJVCg0KTsgLyogbGRvIHBvd2VyIHVwICovCisJCXdyaXRlbChyZWcs
IHUzcGh5X3BvcnQtPmJhc2UgKyAweDFhOCk7CisKKwkJcmVnID0gcmVhZGwodTNwaHlfcG9ydC0+
YmFzZSArIDB4MDQ0KTsKKwkJcmVnICY9IH5CSVQoNCk7IC8qIGJnIHBvd2VyIG9uICovCisJCXdy
aXRlbChyZWcsIHUzcGh5X3BvcnQtPmJhc2UgKyAweDA0NCk7CisKKwkJcmVnID0gcmVhZGwodTNw
aHlfcG9ydC0+YmFzZSArIDB4MTUwKTsKKwkJcmVnIHw9IEJJVCg2KTsgLyogdHggYmlhcyBlbmFi
bGUgKi8KKwkJd3JpdGVsKHJlZywgdTNwaHlfcG9ydC0+YmFzZSArIDB4MTUwKTsKKworCQlyZWcg
PSByZWFkbCh1M3BoeV9wb3J0LT5iYXNlICsgMHgwODApOworCQlyZWcgJj0gfkJJVCgyKTsgLyog
dHggY20gcG93ZXIgdXAgKi8KKwkJd3JpdGVsKHJlZywgdTNwaHlfcG9ydC0+YmFzZSArIDB4MDgw
KTsKKworCQlyZWcgPSByZWFkbCh1M3BoeV9wb3J0LT5iYXNlICsgMHgwYzApOworCQkvKiB0eCBv
YnMgZW5hYmxlIGFuZCByeCBjbSBlbmFibGUgKi8KKwkJcmVnIHw9IChCSVQoMykgfCBCSVQoNCkp
OworCQl3cml0ZWwocmVnLCB1M3BoeV9wb3J0LT5iYXNlICsgMHgwYzApOworCisJCXVkZWxheSgx
KTsKKwl9IGVsc2UgeworCQlyZWcgPSByZWFkbCh1M3BoeV9wb3J0LT5iYXNlICsgMHgxYTgpOwor
CQlyZWcgfD0gQklUKDQpOyAvKiBsZG8gcG93ZXIgZG93biAqLworCQl3cml0ZWwocmVnLCB1M3Bo
eV9wb3J0LT5iYXNlICsgMHgxYTgpOworCisJCXJlZyA9IHJlYWRsKHUzcGh5X3BvcnQtPmJhc2Ug
KyAweDA0NCk7CisJCXJlZyB8PSBCSVQoNCk7IC8qIGJnIHBvd2VyIGRvd24gKi8KKwkJd3JpdGVs
KHJlZywgdTNwaHlfcG9ydC0+YmFzZSArIDB4MDQ0KTsKKworCQlyZWcgPSByZWFkbCh1M3BoeV9w
b3J0LT5iYXNlICsgMHgxNTApOworCQlyZWcgJj0gfkJJVCg2KTsgLyogdHggYmlhcyBkaXNhYmxl
ICovCisJCXdyaXRlbChyZWcsIHUzcGh5X3BvcnQtPmJhc2UgKyAweDE1MCk7CisKKwkJcmVnID0g
cmVhZGwodTNwaHlfcG9ydC0+YmFzZSArIDB4MDgwKTsKKwkJcmVnIHw9IEJJVCgyKTsgLyogdHgg
Y20gcG93ZXIgZG93biAqLworCQl3cml0ZWwocmVnLCB1M3BoeV9wb3J0LT5iYXNlICsgMHgwODAp
OworCisJCXJlZyA9IHJlYWRsKHUzcGh5X3BvcnQtPmJhc2UgKyAweDBjMCk7CisJCS8qIHR4IG9i
cyBkaXNhYmxlIGFuZCByeCBjbSBkaXNhYmxlICovCisJCXJlZyAmPSB+KEJJVCgzKSB8IEJJVCg0
KSk7CisJCXdyaXRlbChyZWcsIHUzcGh5X3BvcnQtPmJhc2UgKyAweDBjMCk7CisJfQorCisJcmV0
dXJuIDA7Cit9CisKK3N0YXRpYyBpbnQgcmszMzI4X3UzcGh5X3R1bmluZyhzdHJ1Y3Qgcm9ja2No
aXBfdTNwaHkgKnUzcGh5LAorCQkJICAgICAgIHN0cnVjdCByb2NrY2hpcF91M3BoeV9wb3J0ICp1
M3BoeV9wb3J0LAorCQkJICAgICAgIHN0cnVjdCBkZXZpY2Vfbm9kZSAqY2hpbGRfbnApCit7CisJ
aWYgKHUzcGh5X3BvcnQtPnR5cGUgPT0gVTNQSFlfVFlQRV9VVE1JKSB7CisJCS8qCisJCSAqIEZv
ciByazMzMjggU29DLCBwcmUtZW1waGFzaXMgYW5kIHByZS1lbXBoYXNpcyBzdHJlbmd0aCBtdXN0
CisJCSAqIGJlIHdyaXR0ZW4gYXMgb25lIGZpeGVkIHZhbHVlIGFzIGJlbG93LgorCQkgKgorCQkg
KiBEaXNzaW1pbGFybHksIHRoZSBvZHQgNDVvaG0gdmFsdWUgc2hvdWxkIGJlIGZsZXhpYmx5IHR1
bmluZ2VkCisJCSAqIGZvciB0aGUgZGlmZmVyZW50IGJvYXJkcyB0byBhZGp1c3QgSFMgZXllIGhl
aWdodCwgc28gaXRzCisJCSAqIHZhbHVlIGNhbiBiZSBhc3NpZ25lZCBpbiBEVCBpbiBjb2RlIGRl
c2lnbi4KKwkJICovCisKKwkJLyoge2JpdHNbMjowXT0xMTF9OiBhbHdheXMgZW5hYmxlIHByZS1l
bXBoYXNpcyAqLworCQl1M3BoeS0+YXBiY2ZnLnUyX3ByZV9lbXAgPSAweDBmOworCisJCS8qIHti
aXRzWzU6M109MDAwfTogcHJlLWVtcGhhc2lzIHN0cmVuZ3RoIGFzIHRoZSB3ZWFrZXN0ICovCisJ
CXUzcGh5LT5hcGJjZmcudTJfcHJlX2VtcF9zdGggPSAweDQxOworCisJCS8qIHtiaXRzWzQ6MF09
MTAxMDF9OiBvZHQgNDVvaG0gdHVuaW5nICovCisJCXUzcGh5LT5hcGJjZmcudTJfb2R0X3R1bmlu
ZyA9IDB4YjU7CisJCS8qIG9wdGlvbmFsIG92ZXJyaWRlIG9mIHRoZSBvZHQgNDVvaG0gdHVuaW5n
ICovCisJCW9mX3Byb3BlcnR5X3JlYWRfdTMyKGNoaWxkX25wLCAicm9ja2NoaXAsb2R0LXZhbC10
dW5pbmciLAorCQkJCSAgICAgJnUzcGh5LT5hcGJjZmcudTJfb2R0X3R1bmluZyk7CisKKwkJd3Jp
dGVsKHUzcGh5LT5hcGJjZmcudTJfcHJlX2VtcCwgdTNwaHlfcG9ydC0+YmFzZSArIDB4MDMwKTsK
KwkJd3JpdGVsKHUzcGh5LT5hcGJjZmcudTJfcHJlX2VtcF9zdGgsIHUzcGh5X3BvcnQtPmJhc2Ug
KyAweDA0MCk7CisJCXdyaXRlbCh1M3BoeS0+YXBiY2ZnLnUyX29kdF90dW5pbmcsIHUzcGh5X3Bv
cnQtPmJhc2UgKyAweDExYyk7CisJfSBlbHNlIGlmICh1M3BoeV9wb3J0LT50eXBlID09IFUzUEhZ
X1RZUEVfUElQRSkgeworCQlpZiAodTNwaHlfcG9ydC0+cmVmY2xrXzI1bV9xdWlyaykgeworCQkJ
ZGV2X2RiZyh1M3BoeS0+ZGV2LCAic3dpdGNoIHRvIDI1bSByZWZjbGtcbiIpOworCQkJLyogcmVm
IGNsayBzd2l0Y2ggdG8gMjVNICovCisJCQl3cml0ZWwoMHg2NCwgdTNwaHlfcG9ydC0+YmFzZSAr
IDB4MTFjKTsKKwkJCXdyaXRlbCgweDY0LCB1M3BoeV9wb3J0LT5iYXNlICsgMHgwMjgpOworCQkJ
d3JpdGVsKDB4MDEsIHUzcGh5X3BvcnQtPmJhc2UgKyAweDAyMCk7CisJCQl3cml0ZWwoMHgyMSwg
dTNwaHlfcG9ydC0+YmFzZSArIDB4MDMwKTsKKwkJCXdyaXRlbCgweDA2LCB1M3BoeV9wb3J0LT5i
YXNlICsgMHgxMDgpOworCQkJd3JpdGVsKDB4MDAsIHUzcGh5X3BvcnQtPmJhc2UgKyAweDExOCk7
CisJCX0gZWxzZSB7CisJCQkvKiBjb25maWd1cmUgZm9yIDI0TSByZWYgY2xrICovCisJCQl3cml0
ZWwoMHg4MCwgdTNwaHlfcG9ydC0+YmFzZSArIDB4MTBjKTsKKwkJCXdyaXRlbCgweDAxLCB1M3Bo
eV9wb3J0LT5iYXNlICsgMHgxMTgpOworCQkJd3JpdGVsKDB4MzgsIHUzcGh5X3BvcnQtPmJhc2Ug
KyAweDExYyk7CisJCQl3cml0ZWwoMHg4MywgdTNwaHlfcG9ydC0+YmFzZSArIDB4MDIwKTsKKwkJ
CXdyaXRlbCgweDAyLCB1M3BoeV9wb3J0LT5iYXNlICsgMHgxMDgpOworCQl9CisKKwkJLyogRW5h
YmxlIFNTQyAqLworCQl1ZGVsYXkoMyk7CisJCXdyaXRlbCgweDA4LCB1M3BoeV9wb3J0LT5iYXNl
ICsgMHgwMDApOworCQl3cml0ZWwoMHgwYywgdTNwaHlfcG9ydC0+YmFzZSArIDB4MTIwKTsKKwor
CQkvKiBUdW5pbmcgUnggZm9yIGNvbXBsaWFuY2UgUkpUTCB0ZXN0ICovCisJCXdyaXRlbCgweDcw
LCB1M3BoeV9wb3J0LT5iYXNlICsgMHgxNTApOworCQl3cml0ZWwoMHgxMiwgdTNwaHlfcG9ydC0+
YmFzZSArIDB4MGM4KTsKKwkJd3JpdGVsKDB4MDUsIHUzcGh5X3BvcnQtPmJhc2UgKyAweDE0OCk7
CisJCXdyaXRlbCgweDA4LCB1M3BoeV9wb3J0LT5iYXNlICsgMHgwNjgpOworCQl3cml0ZWwoMHhm
MCwgdTNwaHlfcG9ydC0+YmFzZSArIDB4MWM0KTsKKwkJd3JpdGVsKDB4ZmYsIHUzcGh5X3BvcnQt
PmJhc2UgKyAweDA3MCk7CisJCXdyaXRlbCgweDBmLCB1M3BoeV9wb3J0LT5iYXNlICsgMHgwNmMp
OworCQl3cml0ZWwoMHhlMCwgdTNwaHlfcG9ydC0+YmFzZSArIDB4MDYwKTsKKworCQkvKgorCQkg
KiBUdW5pbmcgVHggdG8gaW5jcmVhc2UgdGhlIGJpYXMgY3VycmVudAorCQkgKiB1c2VkIGluIFRY
IGRyaXZlciBhbmQgUlggRVEsIGl0IGNhbgorCQkgKiBhbHNvIGluY3JlYXNlIHRoZSB2b2x0YWdl
IG9mIExGUFMuCisJCSAqLworCQl3cml0ZWwoMHgwOCwgdTNwaHlfcG9ydC0+YmFzZSArIDB4MTgw
KTsKKwl9IGVsc2UgeworCQlkZXZfZXJyKHUzcGh5LT5kZXYsICJpbnZhbGlkIHUzcGh5IHBvcnQg
dHlwZVxuIik7CisJCXJldHVybiAtRUlOVkFMOworCX0KKworCXJldHVybiAwOworfQorCitzdGF0
aWMgaW50IHJrMzIyeGhfdTNwaHlfY2FsaWJyYXRlX2VuYWJsZShzdHJ1Y3Qgcm9ja2NoaXBfdTNw
aHkgKnUzcGh5LAorCQkJCQlzdHJ1Y3Qgcm9ja2NoaXBfdTNwaHlfcG9ydCAqdTNwaHlfcG9ydCkK
K3sKKwlpZiAodTNwaHlfcG9ydC0+dHlwZSA9PSBVM1BIWV9UWVBFX1BJUEUpIHsKKwkJd3JpdGVs
KDB4MGMsIHUzcGh5X3BvcnQtPmJhc2UgKyAweDQwOCk7CisJfSBlbHNlIHsKKwkJZGV2X2Vycih1
M3BoeS0+ZGV2LCAiVGhlIHUzcGh5IHR5cGUgaXMgbm90IHBpcGVcbiIpOworCQlyZXR1cm4gLUVJ
TlZBTDsKKwl9CisKKwlyZXR1cm4gMDsKK30KKworc3RhdGljIGNvbnN0IHN0cnVjdCByb2NrY2hp
cF91M3BoeV9jZmcgcmszMzI4X3UzcGh5X2NmZ3NbXSA9IHsKKwl7CisJCS5yZWcJCT0gMHhmZjQ3
MDAwMCwKKwkJLmdyZmNmZwkJPSB7CisJCQkudW1fc3VzcGVuZAk9IHsgMHgwMDA0LCAxNSwgMCwg
MHgxNDUyLCAweDE1ZDEgfSwKKwkJCS51Ml9vbmx5X2N0cmwJPSB7IDB4MDAyMCwgMTUsIDE1LCAw
LCAxIH0sCisJCQkudW1fbHMJCT0geyAweDAwMzAsIDUsIDQsIDAsIDEgfSwKKwkJCS51bV9oc3Rk
Y3QJPSB7IDB4MDAzMCwgNywgNywgMCwgMSB9LAorCQkJLmxzX2RldF9lbgk9IHsgMHgwMDQwLCAw
LCAwLCAwLCAxIH0sCisJCQkubHNfZGV0X3N0CT0geyAweDAwNDQsIDAsIDAsIDAsIDEgfSwKKwkJ
CS5wcF9wd3Jfc3QJPSB7IDB4MDAzNCwgMTQsIDEzLCAwLCAwfSwKKwkJCS5wcF9wd3JfZW4JPSB7
IHsweDAwMjAsIDE0LCAwLCAweDAwMTQsIDB4MDAwNX0sCisJCQkJCSAgICB7MHgwMDIwLCAxNCwg
MCwgMHgwMDE0LCAweDAwMGR9LAorCQkJCQkgICAgezB4MDAyMCwgMTQsIDAsIDB4MDAxNCwgMHgw
MDE1fSwKKwkJCQkJICAgIHsweDAwMjAsIDE0LCAwLCAweDAwMTQsIDB4MDAxZH0gfSwKKwkJCS51
M19kaXNhYmxlCT0geyAweDA0YzQsIDE1LCAwLCAweDExMDAsIDB4MTAxfSwKKwkJfSwKKwkJLnBo
eV9waXBlX3Bvd2VyCT0gcmszMzI4X3UzcGh5X3BpcGVfcG93ZXIsCisJCS5waHlfdHVuaW5nCT0g
cmszMzI4X3UzcGh5X3R1bmluZywKKwkJLnBoeV9jYWxpYnJhdGUJPSByazMyMnhoX3UzcGh5X2Nh
bGlicmF0ZV9lbmFibGUsCisJfSwKKwl7IC8qIHNlbnRpbmVsICovIH0KK307CisKK3N0YXRpYyBj
b25zdCBzdHJ1Y3Qgb2ZfZGV2aWNlX2lkIHJvY2tjaGlwX3UzcGh5X2R0X21hdGNoW10gPSB7CisJ
eyAuY29tcGF0aWJsZSA9ICJyb2NrY2hpcCxyazMzMjgtdTNwaHkiLCAuZGF0YSA9ICZyazMzMjhf
dTNwaHlfY2ZncyB9LAorCXt9Cit9OworTU9EVUxFX0RFVklDRV9UQUJMRShvZiwgcm9ja2NoaXBf
dTNwaHlfZHRfbWF0Y2gpOworCitzdGF0aWMgc3RydWN0IHBsYXRmb3JtX2RyaXZlciByb2NrY2hp
cF91M3BoeV9kcml2ZXIgPSB7CisJLnByb2JlCQk9IHJvY2tjaGlwX3UzcGh5X3Byb2JlLAorCS5k
cml2ZXIJCT0geworCQkubmFtZQk9ICJyb2NrY2hpcC11M3BoeSIsCisJCS5vZl9tYXRjaF90YWJs
ZSA9IHJvY2tjaGlwX3UzcGh5X2R0X21hdGNoLAorCX0sCit9OworbW9kdWxlX3BsYXRmb3JtX2Ry
aXZlcihyb2NrY2hpcF91M3BoeV9kcml2ZXIpOworCitNT0RVTEVfQVVUSE9SKCJGcmFuayBXYW5n
IDxmcmFuay53YW5nQHJvY2stY2hpcHMuY29tPiIpOworTU9EVUxFX0FVVEhPUigiV2lsbGlhbSBX
dSA8d2lsbGlhbS53dUByb2NrLWNoaXBzLmNvbT4iKTsKK01PRFVMRV9ERVNDUklQVElPTigiUm9j
a2NoaXAgVVNCIDMuMCBQSFkgZHJpdmVyIik7CitNT0RVTEVfTElDRU5TRSgiR1BMIHYyIik7Cg==

--b1_I3yRooAJyDua9xsKfbCi5xA10ba7ARh7u54qNRSMQ--

